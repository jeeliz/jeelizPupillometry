 /**
 * Jeeliz Pupillometry - https://github.com/jeeliz/jeelizPupillometry
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZPUPILLOMETRY=(function(){var Na="function"==typeof Object.defineProperties?Object.defineProperty:function(K,J,P){if(K==Array.prototype||K==Object.prototype)return K;K[J]=P.value;return K};function Ta(K){K=["object"==typeof globalThis&&globalThis,K,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var J=0;J<K.length;++J){var P=K[J];if(P&&P.Math==Math)return P}throw Error("Cannot find global object");}var vb=Ta(this);
function Ib(K,J){if(J)a:{var P=vb;K=K.split(".");for(var W=0;W<K.length-1;W++){var la=K[W];if(!(la in P))break a;P=P[la]}K=K[K.length-1];W=P[K];J=J(W);J!=W&&null!=J&&Na(P,K,{configurable:!0,writable:!0,value:J})}}function Jb(K){var J=0;return function(){return J<K.length?{done:!1,value:K[J++]}:{done:!0}}}
function ec(K){var J="undefined"!=typeof Symbol&&Symbol.iterator&&K[Symbol.iterator];if(J)return J.call(K);if("number"==typeof K.length)return{next:Jb(K)};throw Error(String(K)+" is not an iterable or ArrayLike");}
Ib("Symbol",function(K){function J(pa){if(this instanceof J)throw new TypeError("Symbol is not a constructor");return new P(W+(pa||"")+"_"+la++,pa)}function P(pa,I){this.J=pa;Na(this,"description",{configurable:!0,writable:!0,value:I})}if(K)return K;P.prototype.toString=function(){return this.J};var W="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",la=0;return J});
Ib("Symbol.iterator",function(K){if(K)return K;K=Symbol("Symbol.iterator");for(var J="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),P=0;P<J.length;P++){var W=vb[J[P]];"function"===typeof W&&"function"!=typeof W.prototype[K]&&Na(W.prototype,K,{configurable:!0,writable:!0,value:function(){return fc(Jb(this))}})}return K});function fc(K){K={next:K};K[Symbol.iterator]=function(){return this};return K}
Ib("Promise",function(K){function J(I){this.ca=0;this.oa=void 0;this.J=[];this.Nd=!1;var V=this.Xa();try{I(V.resolve,V.reject)}catch(fa){V.reject(fa)}}function P(){this.J=null}function W(I){return I instanceof J?I:new J(function(V){V(I)})}if(K)return K;P.prototype.ca=function(I){if(null==this.J){this.J=[];var V=this;this.oa(function(){V.Ya()})}this.J.push(I)};var la=vb.setTimeout;P.prototype.oa=function(I){la(I,0)};P.prototype.Ya=function(){for(;this.J&&this.J.length;){var I=this.J;this.J=[];for(var V=
0;V<I.length;++V){var fa=I[V];I[V]=null;try{fa()}catch(qa){this.Xa(qa)}}}this.J=null};P.prototype.Xa=function(I){this.oa(function(){throw I;})};J.prototype.Xa=function(){function I(qa){return function(Aa){fa||(fa=!0,qa.call(V,Aa))}}var V=this,fa=!1;return{resolve:I(this.me),reject:I(this.Ya)}};J.prototype.me=function(I){if(I===this)this.Ya(new TypeError("A Promise cannot resolve to itself"));else if(I instanceof J)this.te(I);else{a:switch(typeof I){case "object":var V=null!=I;break a;case "function":V=
!0;break a;default:V=!1}V?this.le(I):this.Id(I)}};J.prototype.le=function(I){var V=void 0;try{V=I.then}catch(fa){this.Ya(fa);return}"function"==typeof V?this.ue(V,I):this.Id(I)};J.prototype.Ya=function(I){this.je(2,I)};J.prototype.Id=function(I){this.je(1,I)};J.prototype.je=function(I,V){if(0!=this.ca)throw Error("Cannot settle("+I+", "+V+"): Promise already settled in state"+this.ca);this.ca=I;this.oa=V;2===this.ca&&this.re();this.vg()};J.prototype.re=function(){var I=this;la(function(){if(I.ke()){var V=
vb.console;"undefined"!==typeof V&&V.error(I.oa)}},1)};J.prototype.ke=function(){if(this.Nd)return!1;var I=vb.CustomEvent,V=vb.Event,fa=vb.dispatchEvent;if("undefined"===typeof fa)return!0;"function"===typeof I?I=new I("unhandledrejection",{cancelable:!0}):"function"===typeof V?I=new V("unhandledrejection",{cancelable:!0}):(I=vb.document.createEvent("CustomEvent"),I.initCustomEvent("unhandledrejection",!1,!0,I));I.promise=this;I.reason=this.oa;return fa(I)};J.prototype.vg=function(){if(null!=this.J){for(var I=
0;I<this.J.length;++I)pa.ca(this.J[I]);this.J=null}};var pa=new P;J.prototype.te=function(I){var V=this.Xa();I.fb(V.resolve,V.reject)};J.prototype.ue=function(I,V){var fa=this.Xa();try{I.call(V,fa.resolve,fa.reject)}catch(qa){fa.reject(qa)}};J.prototype.then=function(I,V){function fa(Da,Ia){return"function"==typeof Da?function(Za){try{qa(Da(Za))}catch($a){Aa($a)}}:Ia}var qa,Aa,Va=new J(function(Da,Ia){qa=Da;Aa=Ia});this.fb(fa(I,qa),fa(V,Aa));return Va};J.prototype.catch=function(I){return this.then(void 0,
I)};J.prototype.fb=function(I,V){function fa(){switch(qa.ca){case 1:I(qa.oa);break;case 2:V(qa.oa);break;default:throw Error("Unexpected state: "+qa.ca);}}var qa=this;null==this.J?pa.ca(fa):this.J.push(fa);this.Nd=!0};J.resolve=W;J.reject=function(I){return new J(function(V,fa){fa(I)})};J.race=function(I){return new J(function(V,fa){for(var qa=ec(I),Aa=qa.next();!Aa.done;Aa=qa.next())W(Aa.value).fb(V,fa)})};J.all=function(I){var V=ec(I),fa=V.next();return fa.done?W([]):new J(function(qa,Aa){function Va(Za){return function($a){Da[Za]=
$a;Ia--;0==Ia&&qa(Da)}}var Da=[],Ia=0;do Da.push(void 0),Ia++,W(fa.value).fb(Va(Da.length-1),Aa),fa=V.next();while(!fa.done)})};return J});Ib("Math.log2",function(K){return K?K:function(J){return Math.log(J)/Math.LN2}});function gc(K,J){K instanceof String&&(K+="");var P=0,W=!1,la={next:function(){if(!W&&P<K.length){var pa=P++;return{value:J(pa,K[pa]),done:!1}}W=!0;return{done:!0,value:void 0}}};la[Symbol.iterator]=function(){return la};return la}
Ib("Array.prototype.keys",function(K){return K?K:function(){return gc(this,function(J){return J})}});var hc="function"==typeof Object.assign?Object.assign:function(K,J){for(var P=1;P<arguments.length;P++){var W=arguments[P];if(W)for(var la in W)Object.prototype.hasOwnProperty.call(W,la)&&(K[la]=W[la])}return K};Ib("Object.assign",function(K){return K||hc});
Ib("Array.prototype.find",function(K){return K?K:function(J,P){a:{var W=this;W instanceof String&&(W=String(W));for(var la=W.length,pa=0;pa<la;pa++){var I=W[pa];if(J.call(P,I,pa,W)){J=I;break a}}J=void 0}return J}});Ib("Object.is",function(K){return K?K:function(J,P){return J===P?0!==J||1/J===1/P:J!==J&&P!==P}});
Ib("Array.prototype.includes",function(K){return K?K:function(J,P){var W=this;W instanceof String&&(W=String(W));var la=W.length;P=P||0;for(0>P&&(P=Math.max(P+la,0));P<la;P++){var pa=W[P];if(pa===J||Object.is(pa,J))return!0}return!1}});
Ib("String.prototype.includes",function(K){return K?K:function(J,P){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(J instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(J,P||0)}});
window.JEELIZPUPILLOMETRY=function(){function K(a){var c=null,d=null,g=null,l=0,n=this,m=null,q={Za:[],Cb:"none",tc:!1,Bb:null,grid:null};this.B=function(){this.Ge(m.Za);g.mg({Cb:m.Cb,tc:m.tc,Bb:m.Bb})};this.sf=function(h){return c[h]};this.Lb=function(h){["s32","s34","s27"].forEach(function(p){u.K(p,[{type:"2f",name:"u21",value:h}])});c&&c.forEach(function(p){p.Lb(h)})};this.Ge=function(h){var p=null;l=h.length;var v=null!==m.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),G=v?m.grid:[1,1];
v&&this.Lb(G);c=h.map(function(x,t){x=Object.assign({},x,{index:t,parent:n,Db:p,If:t===l-1,Ua:v,X:G});return p=t=0===t?ic.instance(x):jc.instance(x)});d=c[0];g=c[l-1];c.forEach(function(x,t){0!==t&&x.Qf()})};this.Z=function(h){h.g(0);var p=h;c.forEach(function(v){p=v.Z(p,!1)});return p};this.rf=function(){return d.qf()};this.Ta=function(){return g.uf()};this.qd=function(){return g.qd()};this.u=function(){c&&(c.forEach(function(h){h.u()}),g=d=c=null,l=0)};"undefined"!==typeof a&&(m=Object.assign({},
q,a),this.B())}var J,P,W,la,pa,I,V,fa,qa,Aa,Va,Da;function Ia(a,c){return a[c>>3]>>7-(c&7)&1}function Za(a,c,d){for(var g=0,l=0;l<d;l++)g=g<<1|Ia(a,c+l);return g}function $a(a){var c=null;a=a.data;"undefined"===typeof btoa&&"undefined"!==typeof Buffer?c=Buffer.from(a,"base64").toString("latin1"):c=atob(a);a=c.length;for(var d=new Uint8Array(a),g=0;g<a;++g)d[g]=c.charCodeAt(g);return d}function wb(a){return"string"===typeof a?JSON.parse(a):a}function kc(a){if("undefined"===typeof wb(a).nb){var c=wb(a);
a=c.ne;var d=c.nf,g=c.n;c=$a(c);for(var l=new Float32Array(g),n=new Float32Array(d),m=a+d+1,q=new Float32Array(d),h=.5,p=0;p<d;p++)q[p]=h,h*=.5;for(h=0;h<g;++h){var v=m*h;p=0===Ia(c,v)?1:-1;var G=Za(c,v+1,a),x=c;v=v+1+a;for(var t=n.length,L=0,D=v;D<v+t;++D)n[L]=Ia(x,D,!0),++L;for(v=x=0;v<d;++v)x+=n[v]*q[v];l[h]=0===x&&0===G?0:p*(1+x)*Math.pow(2,1+G-Math.pow(2,a-1))}a=l}else if(g=wb(a),a=g.nb,0===a)a=new Uint8Array(g.nb);else{d=g.n;g=$a(g);c=new Uint32Array(d);for(l=0;l<d;++l)c[l]=Za(g,l*a,a);a=c}return a}
function Kb(){return{m:[.5,.5],scale:[1,1],N:!1,Jb:!1,za:!1,P:{m:[.5,.5],H:0,ya:1},ea:{m:[.5,.5],H:0}}}function Lb(){if(Ea===Ba.play)return!1;Ea=Ba.play;gb.stop();Mb(0)}function Wa(a,c,d,g){a=4*a+c;return d+(pb[a]/255+pb[a+8]/65025)*(g-d)}function Mb(){if(Ea!==Ba.pause){u.ed();Q.reset();Q.Pa();b.disable(b.DEPTH_TEST);Ca.V();u.Ka();var a=ha.element.currentTime-ha.Eb;0>a&&(ha.Eb=ha.element.currentTime);1E3*a<E.wg||(ha.N.refresh(),ha.Eb+=a,u.set("s76"),ha.ab.C(),ha.N.g(0),Q.l(!1,!1));a=Ua.tf();for(var c=
0;c<a;++c){Nb=c===a-1;u.set("s77");var d=Ob.Ze(ma,Y,ab);xb.C(d,ab);ha.ab.g(0);hb.g(1);Q.l(!1,!1);yb.Z(xb)}Ua.ge();Ca.R();b.viewport(0,0,2,2);u.set("s68");hb.g(0);Q.l(!1,!1);b.readPixels(0,0,2,2,b.RGBA,b.UNSIGNED_BYTE,pb);ra.x=Wa(0,1,-1,1);ra.y=Wa(0,2,-1,1);ra.Bc=Wa(0,3,0,1);ra.rx=Wa(1,0,-E.Ja[0],E.Ja[0]);ra.ry=Wa(1,1,-E.Ja[1],E.Ja[1]);ra.Ac=Wa(1,2,-E.Ja[2],E.Ja[2]);ra.hb=Wa(1,3,0,1);ta.Re=ra.hb-Y.detected;ta.dx=ra.x-Y.x;ta.dy=ra.y-Y.y;ta.Xb=ra.Bc-Y.s;ta.Ub=ra.rx-Y.rx;ta.Vb=ra.ry-Y.ry;ta.Wb=ra.Ac-
Y.rz;c=Ua.hf();a=Math.sqrt(ta.dx*ta.dx+ta.dy*ta.dy+ta.Xb*ta.Xb)/c;c=Math.sqrt(ta.Ub*ta.Ub+ta.Vb*ta.Vb+ta.Wb*ta.Wb)/c;a=1-zb.mc(E.Zc[0],E.Zc[1],a);c=1-zb.mc(E.Sd[0],E.Sd[1],c);a=a*c*zb.mc(E.Rd[0],E.Rd[1],ra.hb);c=qb[++lc%qb.length]=a;for(d=0;d<qb.length;++d)c=Math.min(c,qb[d]);c=Math.max(.5,c);a=Math.min(c,a);a=Fa.Y(E.Sc[0],E.Sc[1],1-Math.pow(a,E.Ae));Y.x=Fa.Y(Y.x,ra.x,a);Y.y=Fa.Y(Y.y,ra.y,a);Y.s=Fa.Y(Y.s,ra.Bc,a);Y.rx=Fa.Y(Y.rx,ra.rx,a);Y.ry=Fa.Y(Y.ry,ra.ry,a);Y.rz=Fa.Y(Y.rz,ra.Ac,a);Y.detected=Fa.Y(Y.detected,
ra.hb,E.ze);!na.Fa&&Y.detected>E.ad+E.$c?na.Fa=!0:na.Fa&&Y.detected<E.ad-E.$c&&(na.Fa=!1);if(na.Fa){Ca.V();var g=ma/va;a=Y.x+E.Xe*Y.ry*Y.s;c=Y.y+Y.s*E.md[1]*g;var l=Y.s*E.md[0]*g;d=Y.s*E.ob[0];g*=Y.s*E.ob[1];d*=2*ha.U[0];g*=2*ha.U[1];a*=2*ha.U[0];c*=2*ha.U[1];l*=ha.U[0];0<Y.rx&&(c*=Math.cos(E.bf*Y.rx));var n=l;n=0>Y.ry?n+Math.sin(Y.ry)*E.mb[0]:n-Math.sin(Y.ry)*E.mb[1];na.G[0].m[0]=a+n;na.G[0].m[1]=c;na.G[0].scale[0]=d;na.G[0].scale[1]=g;l=0<Y.ry?l-Math.sin(Y.ry)*E.mb[0]:l+Math.sin(Y.ry)*E.mb[1];na.G[1].m[0]=
a-l;na.G[1].m[1]=c;na.G[1].scale[0]=d;na.G[1].scale[1]=g;na.G.forEach(mc)}Ca.rg();na.Fa&&(b.viewport(0,va/2,ma/2,va/2),Pb(na.G[1]),b.viewport(ma/2,va/2,ma/2,va/2),Pb(na.G[0]),b.viewport(ma/2,va/4,ma/4,va/4),Qb(na.G[1]),b.viewport(ma/2+ma/4,va/4,ma/4,va/4),Qb(na.G[0]),b.viewport(ma/2,0,ma/4,va/4),Rb(na.G[1]),b.viewport(ma/2+ma/4,0,ma/4,va/4),Rb(na.G[0]),b.viewport(0,0,ma/2,va/2));u.set("s69");hb.g(0);ha.ab.g(1);Q.l(!1,!1);oa.Pb&&(Y.pupilLeftRadius=na.G[0].ea.H,Y.pupilRightRadius=na.G[1].ea.H,oa.Pb(Y));
Ea===Ba.play&&gb.Xd(Mb)}}function mc(a){u.set("s70");u.I("u31",Ab*a.scale[0],Ab*a.scale[1]);u.fa("u47",a.m);u.fa("u11",a.scale);u.F("u49",Sb);a.N.C();ha.N.g(0);Q.l(!1,!1);var c=Bb.process(a.N);a.P.m[0]=Fa.Y(a.P.m[0],c.m[0],E.ec);a.P.m[1]=Fa.Y(a.P.m[1],c.m[1],E.ec);a.P.H=Fa.Y(a.P.H,c.H,E.ec);a.P.ya=c.ya;u.set("s71");u.I("u47",a.m[0]+a.scale[0]*(2*a.P.m[0]-1),a.m[1]+a.scale[1]*(2*a.P.m[1]-1));u.I("u11",2*a.P.H*a.scale[0],2*a.P.H*a.scale[1]);ha.N.g(0);a.Jb.C();Q.l(!1,!1);c=a.za.A();var d=(E.ta-c)/2;
u.set("s72");u.F("u50",Tb);u.I("u51",d/E.ta,c/E.ta);a.za.C();a.Jb.g(0);Q.l(!1,!1);ba.$f(a.za,Cb);Ca.V();for(var g=0,l=[.5,.5],n=0;n<c;++n)for(var m=0;m<c;++m){var q=Cb[4*(m+n*c)];q>g&&(g=q,l[0]=(m+d)/E.ta,l[1]=(n+d)/E.ta)}a.ea.m[0]=l[0];a.ea.m[1]=l[1];a.ea.H=E.Fb[0]+g/255*(E.Fb[1]-E.Fb[0]);a.ea.H*=.5}function Pb(a){a.N.g(0);u.set("s73");u.fa("u47",a.P.m);u.F("u52",a.P.H);u.F("u53",a.P.ya);Q.l(!1,!1)}function Qb(a){a.Jb.g(0);u.set("s74");u.fa("u47",a.ea.m);u.F("u54",a.ea.H);Q.l(!1,!1)}function Rb(a){a.za.g(0);
u.set("s75");Q.l(!1,!1)}function nc(){ha.ab=ba.instance({isPot:!0,isMirror:!0,isLinear:!0,isFloat:!1,width:ma,height:va});xb=Ob.instance({});var a={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,E.borderWidth,E.borderHeight,0,0,0,0,0])};hb=oc.instance(a);pb=new Uint8Array(8*a.width);ra={hb:0,x:0,y:0,Bc:1,rx:0,ry:0,Ac:0};Y={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,pupilLeftRadius:0,pupilRightRadius:0};ta={Re:0,dx:0,dy:0,Xb:0,Ub:0,Vb:0,Wb:0};na.G.forEach(function(c){c.N=ba.instance({isPot:!1,
isLinear:!0,isFloat:!0,width:E.Yb,height:Math.round(E.Yb*E.ob[1]/E.ob[0])});c.Jb=ba.instance({isPot:!0,isLinear:!0,isFloat:!0,isMipmap:!1,width:E.ta});c.za=ba.instance({isPot:!1,isLinear:!1,isFloat:!1,width:Math.round(E.Rf*E.ta)});Cb=new Uint8Array(c.za.A()*c.za.A()*4)})}function Ub(){u.K("s77",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:bb}]);u.K("s78",[{type:"1i",name:"u59",value:0},{type:"1i",name:"u57",value:1},{type:"1f",name:"u62",value:E.minScaleTracked},
{type:"1f",name:"u63",value:E.maxScaleTracked},{type:"1f",name:"u64",value:E.pg},{type:"1f",name:"u65",value:E.xe},{type:"1f",name:"u66",value:E.se},{type:"3f",name:"u61",value:[E.Ic[0]*bb[0],E.Ic[1]*bb[1],E.Ic[2]]}]);u.K("s79",[{type:"1i",name:"u59",value:0}]);u.K("s68",[{type:"1i",name:"u57",value:0},{type:"1f",name:"u67",value:bb[0]}]);u.K("s69",[{type:"1i",name:"u57",value:0},{type:"1i",name:"u68",value:1},{type:"2f",name:"u58",value:bb}]);var a=[{type:"1i",name:"u1",value:0}];u.K("s70",a);u.K("s71",
a);u.K("s72",[{type:"2f",name:"u41",value:E.Fb}].concat(a));u.K("s73",a);u.K("s74",a);u.K("s75",a)}function Vb(){ab=yb.rf();var a=ma/ab;la=E.minScale*a;pa=E.maxScale*a;I=(1-2*E.borderWidth)/E.nStepsX;V=(1-2*E.borderHeight)/E.nStepsY;fa=(pa-la)/E.nStepsScale;qa=E.borderWidth;Aa=E.borderHeight;Va=1-E.borderWidth;Da=1-E.borderHeight;bb=[ab/ma,ab/va];J=0;P=E.borderWidth;W=E.borderHeight;ib=la}function pc(a){rb.get(oa.Pc+E.neuralNetworkPath,function(c){c=JSON.parse(c);a(c)})}function qc(){if(jb.B({gb:oa.ja,
width:ma,height:va,debug:!1,sc:function(){cb("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0}))return!0;cb("GL_INCOMPATIBLE");return!1}function rc(){hb.bg(1);b.viewport(0,0,1,1);u.set("s78");u.ig("u60",P,W,ib);Q.l(!1,!1);Nb&&(b.viewport(1,0,1,1),u.set("s79"),Q.l(!1,!1));1!==++J%2&&(ib+=fa,ib>pa&&(P+=I,ib=la,P>Va&&(P=qa,W+=V,W>Da&&(W=Aa))))}function Db(){u.K("s76",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u55",value:ha.U}])}function Wb(){ha.U[0]=.5;ha.U[1]=.5;var a=ha.ib[1]/ha.ib[0],c=
jb.W()/jb.A();a>c?ha.U[1]*=c/a:ha.U[0]*=a/c}function Xb(a,c){if(Ea===Ba.error)return!1;var d=a.videoHeight;ha.ib[0]=a.videoWidth;ha.ib[1]=d;ha.element=a;c&&c();return!0}function sc(a,c,d){a&&a();a={video:{width:{min:Oa.minWidth,max:Oa.maxWidth,ideal:Oa.idealWidth},height:{min:Oa.minHeight,max:Oa.maxHeight,ideal:Oa.idealHeight}},audio:!1};ia.Rc(a,Oa.deviceId);ia.get(ia.td(),function(g){c&&c(g);d(g)},function(){cb("WEBCAM_UNAVAILABLE")},a)}function cb(a){Ea!==Ba.error&&(Ea=Ba.error,oa.Qa&&oa.Qa(a))}
var Fa={uh:function(a){return Math.ceil(Math.log2(a))},Rh:function(a){return Math.log2(a)},Nh:function(a){return 0===Math.log2(a)%1},Hg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ig:function(a,c,d){return Math.min(Math.max(a,c),d)},Lg:function(a){return a*Math.PI/180},Wh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Xh:function(a){return Math.round(1E6*a)/1E6},vh:function(a,c){return(100*a/c).toFixed(3)},Y:function(a,c,d){return a*
(1-d)+c*d},Sh:function(a,c){return a[0]*(1-c)+a[1]*c},Ve:function(a,c){return Fa.Me(a-c)},Me:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Pg:function(a,c){return Math.abs(Fa.Ve(a,c))},xg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},rb={get:function(a,c,d){var g=new XMLHttpRequest;g.open("GET",a,!0);g.withCredentials=!1;g.onreadystatechange=function(){4===g.readyState&&(200===g.status||0===g.status?c(g.responseText):"undefined"!==
typeof d&&d(g.status))};g.send()},vf:function(a){return new Promise(function(c,d){rb.get(a,c,d)})},rh:function(a,c,d){a+=d?"?"+rb.Ye(d):"";rb.get(a,function(g){c(JSON.parse(g))})},Uh:function(a,c,d){var g=new XMLHttpRequest;g.open("POST",a,!0);g.setRequestHeader("Content-type","application/x-www-form-urlencoded");g.onreadystatechange=function(){4!==g.readyState||200!==g.status&&0!==g.status||d(g.responseText)};g.send(c)},Ye:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+
"="+encodeURIComponent(a[c])}).join("&")},fh:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},tc={create:function(a,c){for(var d=Array(c),g=0;g<c;++g)d[g]=a;return d},Mg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},$h:function(a,c,d){a.forEach(function(g,l){c[l]=g*d})},li:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*
(c+1)),g=a[c];a[c]=a[d];a[d]=g}},oi:function(a){return a.sort(function(c,d){return c-d})},og:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Eb={Sb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Eb.Sb(a[d],c);return a},Og:function(a){return JSON.parse(JSON.stringify(a))}},zb={mi:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},mc:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},Zg:function(a,c,d,g){return Math.pow(Math.min(Math.max((g-a)/(c-a),0),1),d)},vi:function(){return 0},Th:function(){return 1},Qh:function(a){return a},Wg:function(a){return a*a},ah:function(a){return a*(2-a)},Tg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Rg:function(a){return a*a*a},$g:function(a){return--a*a*a+1},Sg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Xg:function(a){return a*a*a*a},bh:function(a){return 1- --a*a*a*a},Ug:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Yg:function(a){return a*a*a*a*a},dh:function(a){return 1+--a*a*a*a*a},Vg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},uc={ef:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return d+"="+d+";\n          vec4 zou="+
c+";\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          "+d+"=0.5*zou*(vec4(1.)+tanhZou);";default:return!1}}},u=function(){function a(r,e,A){e=r.createShader(e);r.shaderSource(e,A);r.compileShader(e);return r.getShaderParameter(e,r.COMPILE_STATUS)?e:null}function c(r,e,A){e=a(r,r.VERTEX_SHADER,e);A=a(r,r.FRAGMENT_SHADER,
A);r===b&&q.push(e,A);var T=r.createProgram();r.attachShader(T,e);r.attachShader(T,A);r.linkProgram(T);return T}function d(r){return["float","sampler2D","int"].map(function(e){return"precision "+r+" "+e+";\n"}).join("")}function g(r,e){e.o=e.o?!0:!1;if(!e.o){e.ra=e.ra||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";e.Ca=e.Ca||["a0"];e.sa=e.sa||[2];e.precision=e.precision||x;e.id=v++;void 0!==e.Yd&&(e.Yd.forEach(function(U,ea){e.h=
e.h.replace(U,e.Gb[ea])}),e.Yd.splice(0));e.Lc=0;e.sa.forEach(function(U){e.Lc+=4*U});var A=d(e.precision);e.xa=c(r,A+e.ra,A+e.h);e.D={};e.i.forEach(function(U){e.D[U]=r.getUniformLocation(e.xa,U)});e.attributes={};e.Oa=[];e.Ca.forEach(function(U){var ea=r.getAttribLocation(e.xa,U);e.attributes[U]=ea;e.Oa.push(ea)});if(e.j){r.useProgram(e.xa);p=e;h=e.id;for(var T in e.j)r.uniform1i(e.D[T],e.j[T])}e.wa=!0}}function l(r){Ja.hg(R);h!==r.id&&(R.T(),h=r.id,p=r,b.useProgram(r.xa),r.Oa.forEach(function(e){0!==
e&&b.enableVertexAttribArray(e)}))}function n(r,e,A){g(r,e,A);r.useProgram(e.xa);r.enableVertexAttribArray(e.attributes.a0);h=-1;return p=e}function m(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var q=[],h=-1,p=null,v=0,G=!1,x="highp",t=["u1"],L=["u0"],D={u1:0},k={u0:0},H={u1:0,u2:1},O={u1:0,u3:1},N=["u1","u3","u4"],F=["u5","u6"],f={u5:0},w=["u7","u8","u9","u10"],C={u7:0,u8:1},M={s0:m(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:t,j:D,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:H},s3:{h:"uniform sampler2D u1;uniform vec2 u11,u12;varying vec2 vv0;void main(){vec2 a=vv0*u11+u12;gl_FragColor=texture2D(u1,a);}",i:["u1","u11","u12"],j:D,o:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:t,j:D},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:H},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:t,j:D},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:t,j:D},s8:{h:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u11;}",i:["u0","u11"],j:k},s9:{h:"uniform sampler2D u0;uniform float u11;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u11,f);gl_FragColor=b*g;}",
i:["u0","u11"],j:k},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:t,j:D},s11:{h:"uniform sampler2D u1,u13;uniform float u14;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u13,vv0);gl_FragColor=mix(b,a,u14*f);}",i:["u1","u13","u14"],j:{u1:0,u13:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u15)+texture2D(u1,vv0+u15*vec2(1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,-1.))+texture2D(u1,vv0+u15*vec2(-1.,1.)));}",
i:["u1","u15"],j:D},s13:{h:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",i:t,j:D,o:!0},s14:{h:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:t,j:D,o:!0},
s15:{h:"uniform sampler2D u1;uniform vec4 u16;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u16);gl_FragColor=j(a);}",
i:["u1","u16"],j:D},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:L,j:k,o:!0},s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:L,j:k,o:!0},s18:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:L,j:k,o:!0},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:L,j:k,o:!0},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:L,j:k},s21:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:L,j:k},s22:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:L,j:k,o:!0},s23:{h:"uniform sampler2D u0,u17;uniform float u18;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u17,e);float b=u18*u18;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u17","u18"],j:{u0:0,u17:1},o:!0},s24:{h:"uniform sampler2D u1;uniform vec2 u19;varying vec2 vv0;void main(){float a=u19.x*u19.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u19.y),f=floor(u19.x*fract(b*u19.y)),g=(f*u19.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u19"],j:D},s25:{h:"uniform sampler2D u8,u7,u20;varying vec2 vv0;void main(){vec4 a=texture2D(u20,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u8,b),f=texture2D(u7,c);gl_FragColor=d*f;}",i:["u8","u7","u20"],j:Object.assign({u20:2},C),o:!0},s26:{h:"uniform float u9,u10;uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec2 b=fract(vv0*u9);float a=u9*u10;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u8,c),f=texture2D(u7,b);gl_FragColor=d*f;}",i:w,j:C},s27:{h:"uniform float u9,u10;uniform vec2 u21;uniform sampler2D u8,u7;varying vec2 vv0;void main(){float a=u9*u10;vec2 b=mod(vv0*u21,vec2(1.)),c=floor(vv0*u21)/u21,d=c+fract(b*u9)/u21,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u8,f),h=texture2D(u7,d);gl_FragColor=g*h;}",
i:["u21"].concat(w),j:C,o:!0},s28:{h:"uniform float u9,u10;uniform sampler2D u8,u7,u23,u24,u25,u26;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u9),d=vv0;float h=u9*u10;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u8,d),m=texture2D(u7,c),a=texture2D(u26,d);a=floor(.5+a*255.);vec4 n=texture2D(u23,c),o=texture2D(u24,c),p=texture2D(u25,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u26","u23","u24","u25"].concat(w),j:Object.assign({u26:3,u23:4,u24:5,u25:6},C),o:!0},s29:{h:"uniform sampler2D u8,u7,u3;uniform float u9,u27,u28,u10;uniform vec2 u29;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u27*vv0),d=u27*vv0-c;float g=u9/u27;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u27;float m=u27*u10/u9;vec2 b=m*h,n=floor(.5*(u10-1.)*(f-u29));b=floor(u29*b+n);vec2 a=(b+i*u28)/u10;a+=.25/u10;vec2 k=step(a,f)*step(l,a);vec4 o=texture2D(u8,j),p=texture2D(u7,a),q=o*p,r=texture2D(u3,j);gl_FragColor=(q*u28*u28+r)*k.x*k.y;}",
i:["u27","u28","u3","u29"].concat(w),j:Object.assign({u3:2},C)},s30:{h:"uniform sampler2D u8,u7;varying vec2 vv0;void main(){vec4 a=texture2D(u8,vv0),b=texture2D(u7,vv0);gl_FragColor=a*b;}",i:["u8","u7"],j:C,o:!0},s31:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:N,j:O},s32:{h:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);}",
i:["u21"].concat(N),j:O,o:!0},s33:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:N,j:O,o:!0},s34:{h:"uniform sampler2D u1,u3;uniform vec2 u21;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u21)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u21"].concat(N),j:O,o:!0},s35:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:N,j:O,o:!0},s36:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:t,j:D,precision:"lowp"},s37:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u30"],j:D,precision:"lowp"},s38:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u30;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u30)).rgb,c=texture2D(u1,vv0+vec2(u30,u30)).rgb,d=texture2D(u1,vv0+vec2(u30,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u30"],j:D,precision:"lowp"},s39:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 f=vec4(1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u31,vv0.y-u31))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u31))*2.,b-=texture2D(u1,vec2(vv0.x+u31,vv0.y-u31))*1.,b+=texture2D(u1,vec2(vv0.x-u31,vv0.y+u31))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u31))*2.,b+=texture2D(u1,vec2(vv0.x+u31,vv0.y+u31))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u31"],j:H,o:!0},s40:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u31;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u31,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u31"],j:H,o:!0},s41:{h:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 f=vec2(1.),g=vec2(.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=f/u6,c=u6/2.,d=floor(vv0*c)+g,j=d/c,b=j-a*.5;vec4 k=texture2D(u5,b),l=texture2D(u5,b+a*h),m=texture2D(u5,b+a*i),n=texture2D(u5,b+a),o=max(k,l),p=max(m,n);gl_FragColor=max(o,p);}",
i:F,j:f,o:!0},s42:{h:"uniform sampler2D u5;uniform vec2 u6;varying vec2 vv0;const vec2 k=vec2(1.),l=vec2(1.,0.),m=vec2(0.,1.),n=vec2(2.,0.),o=vec2(0.,2.);vec4 e(vec2 b,vec2 a){vec4 c=texture2D(u5,a),d=texture2D(u5,a+b*l),f=texture2D(u5,a+b*m),g=texture2D(u5,a+b),h=max(c,d),i=max(f,g);return max(h,i);}void main(){vec2 a=k/u6,c=u6/4.,d=4.*floor(vv0*c),f=d/u6,b=f+a*.5;vec4 g=e(a,b),h=e(a,b+a*n),i=e(a,b+a*2.),p=e(a,b+a*o),q=max(g,h),r=max(i,p);gl_FragColor=max(q,r);}",i:F,j:f,o:!0},s43:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
i:["u1"],j:D,precision:"lowp",o:!0},s44:{h:"uniform sampler2D u1;uniform vec2 u15;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u15)+2002./e*texture2D(u1,vv0-2.*u15)+3003./e*texture2D(u1,vv0-u15)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u15)+2002./e*texture2D(u1,vv0+2.*u15)+1001./e*texture2D(u1,vv0+3.*u15);gl_FragColor=a;}",i:["u15","u1"],j:D,precision:"lowp",o:!0},s45:{h:"uniform sampler2D u1,u17,u32;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u32,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
i:["u1","u17","u32"],j:{u1:0,u17:1,u32:2},o:!0}},y={s46:{h:"uniform float u9,u33;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u9+eps2);float weightSize=toSparsity*u9;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u33*(xyPatch-halfFromSparsity))/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u9","u8","u7","u3","u33"],Gb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{h:"uniform float u9,u33,u10;uniform sampler2D u8,u7,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u10,xyTo=floor(vv0*u9+eps2);float weightSize=fromSparsity*u10;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u9;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u33*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u10,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u8,uvWeight)*texture2D(u7,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u9 u10 u8 u7 u3 u33".split(" "),Gb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},S=null,ca=null,R={yb:function(){return G},B:function(){if(!G){S=Eb.Sb(M,2);ca=Eb.Sb(y,2);x="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var r in S)g(b,S[r],r);u.set("s0");b.enableVertexAttribArray(0);G=!0}},bb:function(r){r.forEach(function(e){R.ha(e)})},ha:function(r){S[r.id]=r;g(b,r,r.id)},Af:function(r,
e,A){e||(e=r);S[e]=Object.create(ca[r]);S[e].Hf=!0;ca[r].Gb&&ca[r].Gb.forEach(function(T,U){var ea="";"gl_Frag"===T.substring(0,7)?(T=new RegExp("[,;]?"+T,"g"),ea=";"):T=new RegExp(T,"g");S[e].h=S[e].h.replace(T,ea+A[U])});g(b,S[e],e)},set:function(r){var e=S[r];e.o&&(e.o=!1,g(b,e,r));l(e)},$a:function(r){return n(r,m(),"s48")},Cc:function(r){return n(r,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:x},"s49")},af:function(r){return"undefined"===typeof S[r]?!1:S[r].wa},T:function(){-1!==
h&&(h=-1,p.Oa.forEach(function(r){0!==r&&b.disableVertexAttribArray(r)}))},Dc:function(){var r=0;p.Oa.forEach(function(e,A){A=p.sa[A];b.vertexAttribPointer(e,A,b.FLOAT,!1,p.Lc,r);r+=4*A})},ed:function(){b.enableVertexAttribArray(0)},Ka:function(){R.Hb(b)},Hb:function(r){r.vertexAttribPointer(p.Oa[0],2,r.FLOAT,!1,8,0)},gi:function(r,e){b.uniform1i(p.D[r],e)},F:function(r,e){b.uniform1f(p.D[r],e)},I:function(r,e,A){b.uniform2f(p.D[r],e,A)},fa:function(r,e){b.uniform2fv(p.D[r],e)},hi:function(r,e){b.uniform3fv(p.D[r],
e)},ig:function(r,e,A,T){b.uniform3f(p.D[r],e,A,T)},jg:function(r,e,A,T,U){b.uniform4f(p.D[r],e,A,T,U)},ce:function(r,e){b.uniform4fv(p.D[r],e)},ii:function(r,e){b.uniformMatrix2fv(p.D[r],!1,e)},ji:function(r,e){b.uniformMatrix3fv(p.D[r],!1,e)},ki:function(r,e){b.uniformMatrix4fv(p.D[r],!1,e)},K:function(r,e){R.set(r);e.forEach(function(A){switch(A.type){case "4f":b.uniform4fv(p.D[A.name],A.value);break;case "3f":b.uniform3fv(p.D[A.name],A.value);break;case "2f":b.uniform2fv(p.D[A.name],A.value);
break;case "1f":b.uniform1f(p.D[A.name],A.value);break;case "1i":b.uniform1i(p.D[A.name],A.value);break;case "mat2":b.uniformMatrix2fv(p.D[A.name],!1,A.value);break;case "mat3":b.uniformMatrix3fv(p.D[A.name],!1,A.value);break;case "mat4":b.uniformMatrix4fv(p.D[A.name],!1,A.value)}})},th:function(){return"lowp"},u:function(){R.T();b.disableVertexAttribArray(0);for(var r in S){var e=S[r];e.wa&&(e.wa=!1,b.deleteProgram(e.xa));e.Hf&&delete S[r]}q.forEach(function(A){b.deleteShader(A)});q.splice(0);v=
0;G=!1;p=null;h=-1}};return R}(),b=null,jb=function(){function a(t){console.log("ERROR in ContextFF: ",t);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(t,L,D){t.setAttribute("width",L);t.setAttribute("height",D)}function g(t){if(c())return!1;var L=document.createElement("canvas");d(L,5,5);var D=null;try{D=L.getContext("webgl2",t)}catch(k){return!1}if(!D)return!1;l(D);ja.fd(D);t=ja.Tb(D);if(!t.la&&!t.na)return Pa.u(),ja.reset(),!1;D=Pa.Tc(D,
t);Pa.u();ja.reset();return D?!0:!1}function l(t){t.clearColor(0,0,0,0);t.disable(t.DEPTH_TEST);t.disable(t.BLEND);t.disable(t.DITHER);t.disable(t.STENCIL_TEST);t.disable(t.CULL_FACE);t.GENERATE_MIPMAP_HINT&&t.FASTEST&&t.hint(t.GENERATE_MIPMAP_HINT,t.FASTEST);t.disable(t.SAMPLE_ALPHA_TO_COVERAGE);t.disable(t.SAMPLE_COVERAGE);t.depthFunc(t.LEQUAL);t.clearDepth(1)}var n=null,m=null,q=null,h=!0,p=null,v=null,G=[],x={A:function(){return n.width},W:function(){return n.height},kh:function(){return n},ih:function(){return b},
pa:function(){return h},flush:function(){b.flush()},Dh:function(){Ca.reset();Ca.V();x.ag()},ag:function(){ba.reset();Q.reset();u.T();u.ed();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Q.Pa();u.Ka()},gf:function(){p||(p=new Uint8Array(n.width*n.height*4));b.readPixels(0,0,n.width,n.height,b.RGBA,b.UNSIGNED_BYTE,p);return p},mh:function(){return n.toDataURL("image/jpeg")},nh:function(){Ca.R();m||(m=document.createElement("canvas"),q=m.getContext("2d"));d(m,n.width,n.height);for(var t=x.gf(),L=q.createImageData(m.width,
m.height),D=m.width,k=m.height,H=L.data,O=0;O<k;++O)for(var N=k-O-1,F=0;F<D;++F){var f=4*(O*D+F),w=4*(N*D+F);H[f]=t[w];H[f+1]=t[w+1];H[f+2]=t[w+2];H[f+3]=t[w+3]}q.putImageData(L,0,0);return m.toDataURL("image/png")},lh:function(t){!m&&t&&(m=document.createElement("canvas"),q=m.getContext("2d"));var L=t?m:document.createElement("canvas");d(L,n.width,n.height);(t?q:L.getContext("2d")).drawImage(n,0,0);return L},B:function(t){t=Object.assign({ma:null,sc:null,gb:null,Yc:null,width:512,height:512,premultipliedAlpha:!1,
Ef:!0,antialias:!1,debug:!1,Ng:!1},t);t.ma?(b=t.ma,n=t.ma.canvas):t.Yc&&!t.gb?n=document.getElementById(t.Yc):t.gb&&(n=t.gb);n||(n=document.createElement("canvas"));n.width=t.width;n.height=t.height;if(b)h=b instanceof WebGL2RenderingContext;else{h=!0;var L={antialias:t.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:t.premultipliedAlpha,stencil:!1,depth:t.Ef,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(L.antialias=!1);var D=g(L);D||!L.antialias||c()||(L.antialias=!1,D=g(L));D&&(b=n.getContext("webgl2",L));b?h=!0:((b=n.getContext("webgl",L))||(b=n.getContext("experimental-webgl",L)),h=!1)}if(!b)return a("WebGL1 and 2 are not enabled");t.sc&&n.addEventListener&&(v=t.sc,n.addEventListener("webglcontextlost",v,!1));if(!ja.B())return a("Not enough GL capabilities");l(b);u.B();Q.B();Pa.Tc(b,ja.ff());G.forEach(function(k){k(b)});G.splice(0);return!0},Cg:function(){return new Promise(function(t){b?t(b):
G.push(t)})},u:function(){b&&(ja.u(),u.u(),Pa.u());v&&(n.removeEventListener("webglcontextlost",v,!1),v=null);b=p=q=m=n=null;G.splice(0)}};return x}(),Ja=function(){function a(){null===c&&("undefined"!==typeof u?c=u:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},hg:function(d){c!==d&&(c&&c.T(),c=d)},yb:function(){return c.yb()},Ka:function(){return c.Ka()},Hb:function(d){return c.Hb(d)},Dc:function(){return c.Dc()},T:function(){return c.T()},set:function(d){a();
return c.set(d)},$a:function(d){a();return c.$a(d)},Cc:function(d){a();return c.Cc(d)}}}(),Ma=function(){function a(e){b.bindTexture(b.TEXTURE_2D,e)}function c(){return q?b.NO_ERROR:b.getError()}function d(e){S[0]=e;e=ca[0];var A=e>>16&32768,T=e>>12&2047,U=e>>23&255;return 103>U?A:142<U?A|31744|((255==U?0:1)&&e&8388607):113>U?(T|=2048,A|(T>>114-U)+(T>>113-U&1)):A=(A|U-112<<10|T>>1)+(T&1)}function g(e){var A=new Uint16Array(e.length);e.forEach(function(T,U){A[U]=d(T)});return A}function l(){if(null!==
R.cc)return R.cc;var e=m(g([.5,.5,.5,.5]),!0);return null===e?!0:R.cc=e}function n(){if(null!==R.dc)return R.dc;var e=m(new Uint8Array([127,127,127,127]),!1);return null===e?!0:R.dc=e}function m(e,A){if(!Ja.yb()||!H)return null;var T=null,U=Math.sqrt(e.length/4);try{var ea=b.getError();if("FUCKING_BIG_ERROR"===ea)return!1;T=r.instance({isFloat:!1,S:A,array:e,width:U});ea=b.getError();if(ea!==b.NO_ERROR)return!1}catch(Ka){return!1}za.R();b.viewport(0,0,U,U);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);
Ja.set("s0");T.Da(0);ya.l(!0,!0);e=4*U*U;A=new Uint8Array(e);b.readPixels(0,0,U,U,b.RGBA,b.UNSIGNED_BYTE,A);U=!0;for(ea=0;ea<e;++ea)U=U&&3>Math.abs(A[ea]-127);T.remove();za.V();return U}var q=!1,h=0,p=null,v=0,G=null,x=null,t=null,L=null,D=null,k=null,H=!1,O=[],N={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,Ed:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,O:null,ud:null,Gf:!1,S:!1,L:null,Ab:4,nc:0},F=!1,
f=null,w=null,C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],M=!1,y=!1,S=new Float32Array(1),ca=new Int32Array(S.buffer),R={cc:null,dc:null},r={B:function(){H||(D=[b.RGBA,null,b.RGBA,b.RGBA],k=[b.RGBA,null,b.RGBA,b.RGBA],p=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],M="undefined"!==typeof JEContext,y="undefined"!==typeof ja,M&&JEContext.Oh()&&p.push(b.TEXTURE8,b.TEXTURE9),G=[-1,-1,-1,-1,-1,-1,-1,-1],L=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],H=!0)},ci:function(){b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR)},di:function(){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST)},zf:function(){if(!x){for(var e=new Float32Array(16384),A=0;16384>A;++A)e[A]=2*Math.random()-1;x={random:r.instance({isFloat:!0,isPot:!0,array:e,width:64}),ie:r.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}r.ug()},ae:function(e){b.framebufferTexture2D(za.ac(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0)},Bh:function(){return x.ie},ug:function(){L[1]=ja.$b(b)},eg:function(){k=D=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Wd:function(e){u.set("s1");za.R();var A=e.A(),T=e.W();b.viewport(0,0,A,T);e.g(0);ya.l(!1,!1)},$f:function(e,A){r.Wd(e);b.readPixels(0,0,e.A(),e.W(),b.RGBA,b.UNSIGNED_BYTE,A)},Vh:function(e,A){r.Wd(e);return ja.zc(0,0,e.A(),e.W(),A)},od:function(e,A,T,U,ea,Ka,Ra){e.activeTexture(e.TEXTURE0);var db=e.createTexture();e.bindTexture(e.TEXTURE_2D,db);ea=ea instanceof
Float32Array?ea:new Float32Array(ea);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,Ka);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,T,U,0,e.RGBA,e.FLOAT,ea);e.bindTexture(e.TEXTURE_2D,null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);Ra&&(za.V(),u.$a(e));e.viewport(0,0,T,U);e.framebufferTexture2D(e.FRAMEBUFFER,
e.COLOR_ATTACHMENT0,e.TEXTURE_2D,A,0);e.bindTexture(e.TEXTURE_2D,db);Ra?ya.l(!0,!0):Q.qb(e);e.deleteTexture(db);H&&(G[0]=-1,t=null,h=0)},Ob:function(e){e!==h&&(b.activeTexture(p[e]),h=e)},ei:function(e){q=e},instance:function(e){var A;function T(){Z=void 0!==z.O.videoWidth?z.O.videoWidth:z.O.width;aa=void 0!==z.O.videoHeight?z.O.videoHeight:z.O.height}function U(B){var X=c();if("FUCKING_BIG_ERROR"===X)return!1;b.texImage2D(b.TEXTURE_2D,0,wa,sa,ua,B);X=c();X!==b.NO_ERROR&&sa!==b.RGBA&&(sa=b.RGBA,b.texImage2D(b.TEXTURE_2D,
0,wa,sa,ua,B));return!0}function ea(){if(!Yb){a(Ga);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Qa);z.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,z.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,z.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));z.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.oh().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.yg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,z.isLinear?b.LINEAR:b.NEAREST);var B=z.isMipmap&&!eb;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,z.Ed?b.LINEAR_MIPMAP_LINEAR:z.isLinear?B?b.NEAREST_MIPMAP_LINEAR:b.LINEAR:B?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);sa=D[z.Ab-1];wa=k[z.Ab-1];ua=L[Fb];ja.pa()&&(B=ja.jf(),sa===b.RGBA&&ua===b.FLOAT?z.isMipmap||z.isLinear?wa=Pa.lf(b):ja.Uc()?B&&(wa=B):wa=b.RGBA16F||b.RGBA:sa===b.RGB&&ua===b.FLOAT&&B&&(wa=B,sa=b.RGBA));if(z.S&&!z.isFloat||
z.isFloat&&z.isMipmap&&Pa.Kf())wa=ja.kf(),ua=ja.$b(b);z.nc&&(sb=z.nc);z.isSrgb&&4===z.Ab&&(sa=JEContext.zh());if(z.O)U(z.O);else if(z.url)U(Xa);else if(Ha){B=Ha;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,B),c()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,null),c()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,Z,aa,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(Hc){b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,null)}z.isKeepArray||(Ha=null)}else B=
c(),"FUCKING_BIG_ERROR"!==B&&(b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,null),B=c(),B!==b.NO_ERROR&&(sa=b.RGBA,z.S&&ua!==b.FLOAT&&(ua=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,null))));if(z.isMipmap)if(!eb&&ka)ka.rb(),tb=!0;else if(eb){B=Math.log2(Math.min(Z,aa));fb=Array(1+B);fb[0]=Ga;for(var X=1;X<=B;++X){var xa=Math.pow(2,X),da=Z/xa;xa=aa/xa;var Ya=b.createTexture();a(Ya);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,wa,da,xa,0,sa,ua,null);a(null);fb[X]=Ya}tb=!0}a(null);G[h]=-1;Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);kb=!0;z.L&&ka&&(z.L(ka),z.L=null)}}function Ka(){for(var B=Z*aa,X=2*B,xa=3*B,da=0;da<B;++da)La[0][da]=lb[da],La[1][da]=lb[da+B],La[2][da]=lb[da+X],La[3][da]=lb[da+xa]}function Ra(){var B=Z*aa*4;Sa=[new Uint8Array(B),new Uint8Array(B),new Uint8Array(B),new Uint8Array(B)];La=[new Float32Array(Sa[0].buffer),new Float32Array(Sa[1].buffer),new Float32Array(Sa[2].buffer),
new Float32Array(Sa[3].buffer)];ub=new Uint8Array(4*B);lb=new Float32Array(ub.buffer);mb=!0}function db(){A=new Uint8Array(Z*aa*4);Zb=new Float32Array(A.buffer);Gb=!0}var z=Object.assign({},N,e),nb=v++;null===z.isFlipY&&(z.isFlipY=z.url?!0:!1);z.data&&(z.array="string"===typeof z.data?kc(z.data):z.isFloat?new Float32Array(z.data):new Uint8Array(z.data),z.isFlipY=!1);var Fb=0,$b=z.O?!0:!1,ob=null,Hb=null,ac=!1;z.S=z.S||z.isFloat;z.S&&(Fb=1);!z.Gf&&z.isFloat&&y&&!ja.Uc()&&(z.isFloat=!1);z.isFloat&&
(Fb=2);z.isAnisotropicFiltering&&M&&!JEContext.Hh()&&(z.isAnisotropicFiltering=!1);var Ga=z.ud||b.createTexture(),Xa=null,Ha=!1,Z=0,aa=0,kb=!1,Yb=!1,mb=!1,La=null,Sa=null,ub=null,lb=null,wa=null,sa=null,ua=null,Qa=z.isFlipY,vc=(e=z.S&&z.isMipmap)&&Pa.He(),eb=e&&!vc?!0:!1,fb=null,sb=-1,bc=-1,tb=!1;var Gb=!1;var Zb=A=null;z.width&&(Z=z.width,aa=z.height?z.height:Z);var ka={get:function(){return Ga},A:function(){return Z},W:function(){return aa},Ch:function(){return z.url},Ih:function(){return z.isFloat},
Kh:function(){return z.S},bi:function(B){Ga=B},Lh:function(){return z.isLinear},rb:function(){b.generateMipmap(b.TEXTURE_2D)},Ee:function(B,X){eb?(B||(B=ka.rd()),r.Ob(X),a(fb[B]),G[X]=-1):ka.g(X)},rd:function(){-1===sb&&(sb=Math.log2(Z));return sb},be:function(B){b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,B)},df:function(B){B||(B=ka.rd());if(eb){u.set("s12");r.Ob(0);for(var X=Z,xa=aa,da=1;da<=B;++da)X/=2,xa/=2,u.I("u15",.25/X,.25/xa),b.viewport(0,0,X,xa),a(fb[da-1]),b.framebufferTexture2D(za.ac(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,fb[da],0),ya.l(!1,1===da);G[0]=-1}else B!==bc&&(bc=B,ka.be(B)),ka.rb()},fi:function(B){($b=!tc.og(B))?(Ha=null,z.O=B,T()):Ha=B},g:function(B){if(!kb)return!1;r.Ob(B);if(G[B]===nb)return!1;a(Ga);G[B]=nb;return!0},Da:function(B){b.activeTexture(p[B]);h=B;a(Ga);G[B]=nb},v:function(){t=ka;r.ae(Ga)},C:function(){b.viewport(0,0,Z,aa);t=ka;r.ae(Ga)},Jc:r.Jc,dg:function(B,X){Z=B;aa=X},resize:function(B,X){ka.dg(B,X);ea()},clone:function(B){B=r.instance({width:Z,height:aa,
S:z.S,isFloat:z.isFloat,isLinear:z.isLinear,isMirrorY:z.isMirrorY,isFlipY:B?!Qa:Qa,isPot:z.isPot});Ja.set("s0");za.V();B.C();ka.g(0);ya.l(!0,!0);return B},kg:function(){b.viewport(0,0,Z,aa)},remove:function(){b.deleteTexture(Ga);Yb=!0;O.splice(O.indexOf(ka),1);ka=null},refresh:function(){ka.Da(0);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);$b?b.texImage2D(b.TEXTURE_2D,0,wa,sa,ua,z.O):b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,Ha);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Vd:function(){mb||Ra();
b.readPixels(0,0,Z,4*aa,b.RGBA,b.UNSIGNED_BYTE,ub);Ka();return La},Wf:function(){mb||Ra();return ja.zc(0,0,Z,4*aa,ub).then(function(){Ka();return La})},Yf:function(){Gb||db();b.readPixels(0,0,Z,aa,b.RGBA,b.UNSIGNED_BYTE,A);return Zb},Xf:function(){Gb||db();return ja.zc(0,0,Z,aa,A)},cd:function(B){za.R();u.set("s15");ka.g(0);if(B)b.viewport(0,0,Z,aa),u.jg("u16",.25,.25,.25,.25),ya.l(!1,!0);else for(B=0;4>B;++B)b.viewport(0,aa*B,Z,aa),u.ce("u16",C[B]),ya.l(!1,0===B)},Kc:function(B){var X=ua===L[0]&&
!n();a(Ga);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);X?(ac||(ob=document.createElement("canvas"),ob.width=Z,ob.height=aa,Hb=ob.getContext("2d"),Hb.createImageData(Z,aa),ac=!0),null.data.set(B),Hb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,wa,sa,ua,ob)):b.texImage2D(b.TEXTURE_2D,0,wa,Z,aa,0,sa,ua,B);G[h]=nb;Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ui:function(B,X){a(Ga);X&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,wa,sa,ua,B);G[h]=nb;X&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1)},ai:function(B,X){var xa=Z*aa,da=4*xa;B=z.S?B?"RGBE":"JSON":"RGBA";X&&(B=X);X=ja.pa()&&!1;var Ya=null;switch(B){case "RGBE":Ya="s13";break;case "JSON":Ya=X?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Ya="s7"}mb||("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B?(Sa=new Uint8Array(da),mb=!0):"JSON"!==B||X||Ra());za.R();u.set(Ya);ka.g(0);da=null;if("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B){b.viewport(0,0,Z,aa);ya.l(!0,!0);b.readPixels(0,0,Z,aa,b.RGBA,b.UNSIGNED_BYTE,Sa);if("RGBAARRAY"===B)return{data:Sa};
F||(f=document.createElement("canvas"),w=f.getContext("2d"),F=!0);f.width=Z;f.height=aa;xa=w.createImageData(Z,aa);xa.data.set(Sa);w.putImageData(xa,0,0);da=f.toDataURL("image/png")}else if("JSON"===B)if(X)da=new Float32Array(xa),b.viewport(0,0,Z,aa),ya.l(!0,!0),b.readPixels(0,0,Z,aa,b.RGBA,b.FLOAT,da);else{for(da=0;4>da;++da)b.viewport(0,aa*da,Z,aa),u.ce("u16",C[da]),ya.l(!da,!da);ka.Vd();da=Array(xa);for(X=0;X<xa;++X)da[4*X]=La[0][X],da[4*X+1]=La[1][X],da[4*X+2]=La[2][X],da[4*X+3]=La[3][X]}return{format:B,
data:da,width:Z,height:aa,isMirrorY:z.isMirrorY,isFlipY:"RGBA"===B?z.isFlipY:!z.isFlipY}}};z.isMipmap&&!eb&&kb&&!tb&&(ka.rb(),tb=!0);if(z.url)a(Ga),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Xa=new Image,Xa.crossOrigin="anonymous",Xa.src=z.url,Xa.onload=function(){Z=Xa.width;aa=Xa.height;ea()};else if(z.O){var cc=function(){T();Z?ea():setTimeout(cc,1)};cc()}else z.array?(z.S&&!z.isFloat?z.array instanceof Uint16Array?(Ha=z.array,ea()):l()?(Ha=g(z.array),ea()):(ea(),r.od(b,
Ga,ka.A(),ka.W(),z.array,Qa,!0)):(Ha=z.isFloat?z.array instanceof Float32Array?z.array:new Float32Array(z.array):z.array instanceof Uint8Array?z.array:new Uint8Array(z.array),ea()),z.isKeepArray||(Ha&&Ha!==z.array&&(Ha=null),delete z.array)):z.ud?kb=!0:ea();ka.yh=ka.A;z.L&&kb&&(z.L(ka),z.L=null);O.push(ka);return ka},R:function(e){e!==h&&(b.activeTexture(p[e]),h=e);G[e]=-1;a(null)},Bg:function(e){x.random.g(e)},Jc:function(){t=null;b.framebufferTexture2D(za.ac(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,
0)},reset:function(){0!==h&&b.activeTexture(p[0]);for(var e=0;e<p.length;++e)G[e]=-1;h=-1},Yh:function(){h=-1},qg:function(){for(var e=0;e<p.length;++e)r.R(e)},pd:function(){x&&(x.random.remove(),x.ie.remove())},ti:function(e,A){if("RGBA"===e.format||"RGBE"===e.format){var T=new Image;T.src=e.data;T.onload=function(){r.instance({isMirrorY:e.isMirrorY,isFlipY:e.isFlipY,isFloat:!1,O:T,L:function(U){if("RGBA"===e.format)A(U);else{var ea=e.width,Ka=e.height,Ra=r.instance({isMirrorY:e.isMirrorY,isFloat:!0,
width:ea,height:Ka,isFlipY:e.isFlipY});za.V();b.viewport(0,0,ea,Ka);u.set("s14");Ra.v();U.g(0);ya.l(!0,!0);r.R(0);A(Ra);ja.flush();U.remove()}}})}}else"JSON"===e.format?A(r.instance({isFloat:!0,isFlipY:e.isFlipY,width:e.width,height:e.height,array:new Float32Array(e.data)})):A(!1)},Oe:g,u:function(){t&&(Ca.V(),r.Jc(),Ca.R());r.qg();O.slice(0).forEach(function(e){e.remove()});O.splice(0);H=!1;v=0;"undefined"!==typeof Pa&&Pa.u();x=null}};return r}(),oc=function(){return{instance:function(a){var c=[Ma.instance(a),
Ma.instance(a)],d=[c[1],c[0]],g=d,l={bg:function(n){g[1].v();g[0].g(n);l.ee()},cg:function(n){g[1].C();g[0].g(n);l.ee()},ee:function(){g=g===c?d:c},refresh:function(){g[0].refresh();g[1].refresh()},g:function(n){g[0].g(n)},Da:function(n){g[0].Da(n)},Ag:function(n){g[1].g(n)},sh:function(){return g[0]},wh:function(){return g[1]},Kc:function(n){g[0].Kc(n);g[1].Kc(n)},remove:function(){g[0].remove();g[1].remove();g=null},sync:function(){l.cg(0);u.set("s0");Q.l(!1,!1)}};return l}}}(),ya=function(){function a(h){var p=
{ga:null,indices:null};p.ga=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,p.ga);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);p.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,p.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),h.STATIC_DRAW);return p}var c=null,d=0,g=!1,l=[],n=-2,m=-2,q={reset:function(){m=n=-2},B:function(){g||(c=a(b),q.Pa(),g=!0)},instance:function(h){var p=d++,v=h.indices?h.indices.length:0,G="undefined"===typeof h.mode?
b.STATIC_DRAW:h.mode,x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,x);b.bufferData(b.ARRAY_BUFFER,h.ga instanceof Float32Array?h.ga:new Float32Array(h.ga),G);n=p;var t=null,L=null,D=null;if(h.indices){t=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,t);var k=null;65536>h.indices.length?(k=Uint16Array,L=b.UNSIGNED_SHORT,D=2):(k=Uint32Array,L=b.UNSIGNED_INT,D=4);k=h.indices instanceof k?h.indices:new k(h.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,k,G);m=p}var H={Fe:function(O){n!==p&&(b.bindBuffer(b.ARRAY_BUFFER,
x),n=p);O&&Ja.Dc()},Ce:function(){m!==p&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,t),m=p)},bind:function(O){H.Fe(O);H.Ce()},We:function(){b.drawElements(b.TRIANGLES,v,L,0)},Qg:function(O,N){b.drawElements(b.TRIANGLES,O,L,N*D)},remove:function(){b.deleteBuffer(x);h.indices&&b.deleteBuffer(t);H=null}};l.push(H);return H},Pa:function(){-1!==n&&(b.bindBuffer(b.ARRAY_BUFFER,c.ga),n=-1);-1!==m&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),m=-1)},l:function(h,p){h&&ya.Pa();p&&Ja.Ka();b.drawElements(b.TRIANGLES,
3,b.UNSIGNED_SHORT,0)},qb:function(h){h=h||b;var p=a(h);h.bindBuffer(h.ARRAY_BUFFER,p.ga);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,p.indices);Ja.Hb(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(p.ga);h.deleteBuffer(p.indices);q.reset();g&&(q.Pa(),Ja.Ka())},pd:function(){var h=b,p=c;h.deleteBuffer(p.ga);h.deleteBuffer(p.indices)},u:function(){q.pd();l.forEach(function(h){h.remove()});
b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);q.reset();g=!1;l.splice(0);d=0}};return q}(),za=function(){var a=null,c=null,d=null,g=!1,l=[],n={M:-2,nd:1},m={yb:function(){return g},B:function(){if(!g){a=b.createFramebuffer();var q=ja.pa();c=q&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=q&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;g=!0}},ph:function(){return c},mf:function(){return d},ac:function(){return b.FRAMEBUFFER},xh:function(){return n},hh:function(){return a},
instance:function(q){void 0===q.Ad&&(q.Ad=!1);var h=q.N?q.N:null,p=q.width,v=void 0!==q.height?q.height:q.width,G=a,x=null,t=!1,L=!1,D=0;h&&(p=p?p:h.A(),v=v?v:h.W());var k={Zd:function(){t||(G=b.createFramebuffer(),t=!0,D=n.nd++)},ye:function(){k.Zd();k.v();x=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,x);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,p,v);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,x);b.clearDepth(1)},bind:function(H,O){D!==n.M&&(b.bindFramebuffer(c,
G),n.M=D);h&&h.v();O&&b.viewport(0,0,p,v);H&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},zg:function(){D!==n.M&&(b.bindFramebuffer(c,G),n.M=D)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Jg:function(){b.clear(b.COLOR_BUFFER_BIT)},Kg:function(){b.clear(b.DEPTH_BUFFER_BIT)},kg:function(){b.viewport(0,0,p,v)},v:function(){D!==n.M&&(b.bindFramebuffer(c,G),n.M=D)},rtt:function(H){h=H;n.M!==D&&(b.bindFramebuffer(b.FRAMEBUFFER,G),n.M=D);H.v()},R:function(){b.bindFramebuffer(c,null);
n.M=-1},resize:function(H,O){p=H;v=O;x&&(b.bindRenderbuffer(b.RENDERBUFFER,x),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,p,v))},remove:function(){G===a||L||(b.bindFramebuffer(c,G),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),x&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),n.M=-1,b.deleteFramebuffer(G),x&&b.deleteRenderbuffer(x));L=!0}};q.Ad&&k.ye();l.push(k);return k},R:function(){b.bindFramebuffer(c,null);n.M=-1},
rg:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);ja.de();n.M=-1},reset:function(){n.M=-2},V:function(){0!==n.M&&(b.bindFramebuffer(c,a),n.M=0)},clear:function(){ja.de();b.clear(b.COLOR_BUFFER_BIT)},u:function(){m.R();l.forEach(function(q){q.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);m.reset();g=!1;l.splice(0);n.nd=1}};return m}(),ja=function(){function a(){q="undefined"===typeof jb?JEContext:jb;h=!0}function c(f,w,C){for(var M=0;M<w.length;++M){var y=
C.getExtension(w[M]+"_"+f);if(y)return y}return null}function d(){null!==k.Kb&&(clearTimeout(k.Kb),k.Kb=null);k.Ga=!1}function g(f){if(0===k.ua.length){k.aa=b.PIXEL_PACK_BUFFER;k.ua.splice(0);k.tb.splice(0);for(var w=0;w<k.Ra;++w)k.ua.push(b.createBuffer()),k.tb.push(-1);k.ka=0;k.rc=0}b.bindBuffer(k.aa,k.ua[k.ka]);f.byteLength!==k.tb[k.ka]&&(b.bufferData(k.aa,f.byteLength,b.STREAM_READ),k.tb[k.ka]=f.byteLength);k.Fh=!0}function l(){b.bindBuffer(k.aa,null)}function n(){k.Ea.forEach(function(f){b.deleteSync(f)});
k.Ea.splice(0)}function m(){k.ka=(k.ka+1)%k.Ra;++k.rc}var q=null,h=!1,p={Bd:!1,Ec:null,Fc:null,Fd:!1,Jf:!1,Gc:null,Gd:!1,Hc:null,Cd:!1,Qb:null,Cf:!1,Rb:null,Df:!1},v=null,G={la:!0,na:!0,Zb:!0,Ud:!1},x=null,t=!0,L=null,D=null,k={Pe:1,Ra:-1,ka:0,rc:0,Ga:!1,ua:[],Ea:[],tb:[],aa:null,Kb:null},H="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),O=["OES","MOZ_OES","WEBKIT_OES"],N="undefined"===typeof window?{}:window,F={B:function(){if(h)return!0;F.reset();h||a();var f=b;if(!v.Bd){v.Ec=F.jd(f);N.GL_EXT_FLOAT=
v.Ec;v.Fd=v.Ec?!0:!1;if(v.Fd||F.pa())v.Fc=F.kd(f),v.Jf=v.Fc?!0:!1,N.GL_EXT_FLOATLINEAR=v.Fc;v.Bd=!0}if(!v.Cd){v.Gc=F.lb(f);v.Gc&&(v.Gd=!0,N.GL_EXT_HALFFLOAT=v.Gc);if(v.Gd||F.pa())v.Hc=F.ld(f),N.GL_EXT_HALFFLOATLINEAR=v.Hc;v.Gh=v.Hc?!0:!1;v.Cd=!0}v.Qb=F.gd(f);v.Cf=v.Qb?!0:!1;N.GL_EXT_COLORBUFFERFLOAT=v.Qb;v.Rb=F.hd(f);v.Df=v.Rb?!0:!1;N.GL_EXT_COLORBUFFERHALFFLOAT=v.Rb;za.B();Ma.B();if(!F.Se())return!1;ya.B();Ma.zf();return!0},reset:function(){v=Object.assign({},p);x=Object.assign({},G)},A:function(){h||
a();return q.A()},W:function(){h||a();return q.W()},pa:function(){h||a();return q.pa()},fd:function(f){F.gd(f);F.hd(f);F.jd(f);F.kd(f);F.lb(f);F.ld(f)},gd:c.bind(null,"color_buffer_float",H),hd:c.bind(null,"color_buffer_half_float",H),jd:c.bind(null,"texture_float",O),kd:c.bind(null,"texture_float_linear",O),lb:c.bind(null,"texture_half_float",O),ld:c.bind(null,"texture_half_float_linear",O),$b:function(f){var w=F.lb(f);return w&&w.HALF_FLOAT_OES?w.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},jf:function(){return D||
b.RGBA32F||b.RGBA},kf:function(){return L||b.RGBA16F||b.RGBA},ff:function(){return x},Uc:function(){return x.la},Eg:function(){return x.na},Dg:function(){return x.Zb},Ie:function(){return x.Ud&&t},he:function(f){t=f;!f&&k.Ga&&(n(),b.bindBuffer(k.aa,null),k.Ga=!1)},Mh:function(){return k.Ga},Ib:function(f,w,C){function M(){f.bindTexture(f.TEXTURE_2D,null);f.bindFramebuffer(y,null);f.deleteTexture(R);f.deleteFramebuffer(ca)}var y=f.FRAMEBUFFER,S=f.NEAREST,ca=f.createFramebuffer();f.bindFramebuffer(y,
ca);var R=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,R);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,S);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,S);f.texImage2D(f.TEXTURE_2D,0,w,3,3,0,f.RGBA,C,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,R,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||
f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return M(),!1;Ja.Cc(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);ya.qb(f);f.bindFramebuffer(y,null);Ja.$a(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,R);ya.qb(f);w=new Uint8Array(36);f.readPixels(0,0,3,3,f.RGBA,f.UNSIGNED_BYTE,w);M();for(C=0;36>C;++C)if(3!==C%4&&3<Math.abs(w[C]-127))return!1;return!0},Tb:function(f){var w={la:!1,na:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);
f.RGBA32F&&F.Ib(f,f.RGBA32F,f.FLOAT)&&(w.la=!0,D=f.RGBA32F);!w.la&&F.Ib(f,f.RGBA,f.FLOAT)&&(w.la=!0,D=f.RGBA);var C=F.$b(f);L=null;f.RGBA16F&&F.Ib(f,f.RGBA16F,C)&&(w.na=!0,L=f.RGBA16F);!w.na&&F.Ib(f,f.RGBA,C)&&(w.na=!0,L=f.RGBA);return w},Te:function(){var f=za.instance({width:2});f.Zd();var w=Ma.instance({width:2,isFloat:!0,Ab:3});f.v();w.v();F.flush();b.checkFramebufferStatus(za.mf())!==b.FRAMEBUFFER_COMPLETE?(Ma.eg(),x.Zb=!1):x.Zb=!0;f.remove();w.remove()},Ue:function(){var f=!1;F.pa()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(w){return"undefined"!==
typeof b[w]}));x.Ud=f},Se:function(){var f=F.Tb(b);Object.assign(x,f);if(!x.la&&!x.na)return!1;F.Te();F.Ue();return!0},Zf:function(f,w,C,M,y){b.readPixels(f,w,C,M,b.RGBA,b.UNSIGNED_BYTE,y);return Promise.resolve(y,!1)},zc:function(f,w,C,M,y,S,ca){if(!F.Ie())return F.Zf(f,w,C,M,y);k.Ra=ca||k.Pe;g(y);b.readPixels(f,w,C,M,b.RGBA,b.UNSIGNED_BYTE,0);k.Ea[k.ka]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();var R=!1;return new Promise(function(r,e){function A(){if(!k.Ga)return d(),l(),m(),e(),!1;
var T=(k.ka+1)%k.Ra;switch(b.clientWaitSync(k.Ea[T],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(k.Ea[T]),k.Ea[T]=null,b.bindBuffer(k.aa,k.ua[T]),b.getBufferSubData(k.aa,0,y),l(),m(),r(y,R),!0}k.Kb=setTimeout(A,0);return!1}d();k.rc+1<k.Ra?(l(),m(),r(y,!1)):(k.Ga=!0,A()||!S||R||(R=!0,S()))})},de:function(){b.viewport(0,0,F.A(),F.W())},flush:function(){b.flush()},u:function(){d();n();Ma.u();za.u();ya.u();k.ua.forEach(function(f){b.deleteBuffer(f)});k.ua.splice(0);
Ja.reset();h=!1}};return F}(),Q=ya,Ca=za,ba=Ma,Pa=function(){function a(f,w,C,M){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,M?k.NEAREST_MIPMAP_NEAREST:k.LINEAR);var y=null;if(null!==C)try{y=k.getError();if("FUCKING_BIG_ERROR"===y)return!1;k.texImage2D(k.TEXTURE_2D,0,f,4,4,0,k.RGBA,w,C);y=k.getError();if(y!==k.NO_ERROR)return!1}catch(S){return!1}M&&k.generateMipmap(k.TEXTURE_2D);k.clear(k.COLOR_BUFFER_BIT);Q.qb(k);y=k.getError();if("FUCKING_BIG_ERROR"===y)return!1;k.readPixels(0,0,2,2,k.RGBA,
k.UNSIGNED_BYTE,v);y=k.getError();y===k.INVALID_OPERATION&&"undefined"!==typeof k.PIXEL_PACK_BUFFER&&(k.bindBuffer(k.PIXEL_PACK_BUFFER,null),k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,v),y=k.getError());if(y!==k.NO_ERROR)return!1;C=!0;for(M=0;16>M;++M)C=C&&4>Math.abs(v[M]-127);C&&(h.Pd=w,h.yd=f);return C}function c(f,w){return H.la&&a(f,k.FLOAT,new Float32Array(G),w)?(q=m.Qc,!0):!1}function d(f,w,C){if(!H.na)return!1;var M=Ma.Oe(G),y=ja.lb(k);if(y&&y.HALF_FLOAT_OES&&a(f,y.HALF_FLOAT_OES,M,w)||k.HALF_FLOAT&&
a(f,k.HALF_FLOAT,M,w))return q=m.Na,!0;M=new Float32Array(G);if(a(f,k.FLOAT,M,w))return q=m.Na,!0;k.bindTexture(k.TEXTURE_2D,C);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,2,2,0,k.RGBA,k.UNSIGNED_BYTE,null);k.bindFramebuffer(h.jb,F);Ma.od(k,C,2,2,M,!1,!1);k.bindFramebuffer(h.jb,null);k.bindTexture(k.TEXTURE_2D,C);return a(f,null,null,w)?(q=m.Na,!0):!1}function g(f,w,C){p=!0;if(d(f,!0,C)||c(w,!0))return!0;p=!1;return d(f,!1,C)||c(w,!1)?!0:!1}function l(f){if(q===m.T){k=f||b;q=m.RGBA8;p=!0;ja.fd(k);H||(H=ja.Tb(k));
Ca.reset();F=k.createFramebuffer();h.jb=k.DRAW_FRAMEBUFFER||k.FRAMEBUFFER;k.bindFramebuffer(h.jb,null);k.clearColor(0,0,0,0);k.viewport(0,0,2,2);u.T();O=u.$a(k);f=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,f);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);N=f;var w=f=k.RGBA,C=k.RGBA16F,M=k.RGBA32F;M&&(f=M);C&&(w=C);if((C||M)&&g(w,f,N))return n(),
!0;f=w=k.RGBA;if(g(w,f,N))return n(),!0;q=m.RGBA8;n();return!1}}function n(){k.deleteProgram(O.xa);k.deleteTexture(N);N=O=null}for(var m={T:-1,Qc:3,Na:2,RGBA8:0},q=m.T,h={Pd:null,yd:null,jb:null},p=!0,v=new Uint8Array(16),G=Array(64),x=0;4>x;++x)for(var t=0;4>t;++t){var L=0===(t+x)%2?1:0,D=4*x+t;G[4*D]=L;G[4*D+1]=L;G[4*D+2]=L;G[4*D+3]=L}var k=null,H=null,O=null,N=null,F=null;return{He:function(f){l(f);return p},Tc:function(f,w){q===m.T&&(typeof("undefined"!==w)&&(H=w),l(f));return q!==m.RGBA8},Jh:function(f){l(f);
return q===m.Qc},Kf:function(f){l(f);return q===m.Na},qh:function(f){l(f);return h.Pd},lf:function(f){l(f);return h.yd},u:function(){k=null;p=!0;q=m.T;H=null}}}(),ic=function(){return{instance:function(a){function c(){v&&v.remove();v=ba.instance({isFloat:!1,isPot:!1,width:d.size*d.X[0],height:d.size*d.X[1],isLinear:d.isLinear})}var d=Object.assign({mask:null,size:-1,preprocessing:"none",preprocessingSize:a.size,customInputShader:null,isLinear:!0,nBlurPass:1,varianceMin:.1,blurKernelSizePx:5,gain:1,
overlap:0,isNormalized:!1,tilt:-1,X:[1,1]},a),g=null,l=!1,n=!1,m=null,q=!1;a=!1;var h=null;d.mask&&(l=!0,"undefined"!==typeof E&&E&&void 0!==E.Be&&(d.mask=E.Be+d.mask),g=ba.instance({isFloat:!1,url:d.mask}));var p=null;d.customInputShader&&(p="s50",u.ha({name:"_",id:p,h:d.customInputShader,si:["uSource"],precision:"lowp"}),u.K(p,[{type:"1i",name:"_",value:0}]));switch(d.preprocessing){case "sobel":h="s39";q=!0;break;case "meanNormalization":h="s40";q=!0;break;case "grayScale":h="s36";q=!1;break;case "grayScaleTilt":h=
"s37";a=!0;q=!1;break;case "rgbGrayTilt":h="s38";a=!0;q=!1;break;case "copy":h=p?p:"s0";break;case "inputLightRegulation":h=p?p:"s36";m=wc.instance({xd:d.preprocessingSize,Od:d.size,Ld:d.nBlurPass,ba:!1});n=!0;break;case "inputMix0":h="none";m=xc.instance({$:d.preprocessingSize,qa:d.varianceMin,ia:d.blurKernelSizePx,gain:d.gain||1,ba:!1,isLinear:d.isLinear});n=!0;break;case "inputMix1":h="none";m=yc.instance({$:d.preprocessingSize,qa:d.varianceMin,ia:d.blurKernelSizePx,gain:d.gain||1,ba:!1});n=!0;
break;case "inputCut4":h="none";m=zc.instance({$:d.preprocessingSize,qa:d.varianceMin,ia:d.blurKernelSizePx,gain:d.gain||1,Va:d.isNormalized||!1,xc:d.overlap||0,ba:!1});d.preprocessingSize*=m.pf();n=!0;break;case "direct":case "none":case "abort":h="abort";break;default:h="s4"}d.preprocessingSize=Math.ceil(d.preprocessingSize);a&&u.K(h,[{name:"u30",type:"1f",value:d.tilt}]);l&&(h+="Mask");var v=null;c();var G={A:function(){return d.size},qf:function(){return d.preprocessingSize},bc:function(){return G.A()},
uf:function(){return n?m.Ta():v},Lb:function(x){d.X=x;c()},Z:function(x){Ca.V();if("abort"===h)return x.g(0),x;"none"!==h&&(u.set(h),q&&u.F("u31",1/d.size),v.C(),l&&g.g(1),Q.l(!1,!1),v.g(0),x=v);n&&m.process(x)},u:function(){v.remove();l&&g.remove()}};return G}}}(),jc=function(){return{instance:function(a){function c(){if(F.La){l.input&&(l.input.remove(),l.wb.remove());var w=a.size*a.sparsity;N=Math.log(w/a.size)/Math.log(2);l.input=ba.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:w*a.X[0],height:w*
a.X[1],nc:N});l.wb=ba.instance({isFloat:!0,isPot:!0,width:a.size*a.X[0],height:a.size*a.X[1]})}}function d(){l.output&&l.output.remove();l.output=ba.instance({isFloat:!0,isPot:!m,isLinear:!m&&q.isLinear,width:a.size*a.X[0],height:a.size*a.X[1]})}function g(w){q.buffer.forEach(function(C,M){q.results[M][0]=w[0][C];q.results[M][1]=w[1][C];q.results[M][2]=w[2][C];q.results[M][3]=w[3][C]});return q.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,wb:null,output:null,wc:null,uc:null,vc:null},
n=null,m=!0,q={type:"undef",L:null,isLinear:!1,buffer:[],results:[],xb:!1},h=-1,p=a.isReorganize?a.isReorganize:!1,v=a.kernelsCount?!0:!1,G=[a.Ua?"s32":"s31",a.Ua?"s34":"s33","s35"][a.shiftRGBAMode||0],x={isEnabled:!1},t=1/a.size;a.If?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Db.bc(),m=!1):"full"===a.connectivityUp&&(a.sparsity=a.Db.bc());var L={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],D=a.sparsity*a.sparsity,k=!1,
H=a.size,O="";if(a.maxPooling){switch(a.maxPooling.size){case 2:O="s41";break;case 4:O="s42"}k=!0;H/=a.maxPooling.size;l.uc=ba.instance({isFloat:!0,isPot:!1,width:H})}var N=-1,F=null;m&&d();l.bias=ba.instance(a.bias);var f={A:function(){return a.size},bc:function(){return H},qd:function(){return a.classesCount},De:function(w){n.g(w)},Qf:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,Nf:ba.instance(a.remap.maskTexture),Za:a.remap.layers.map(function(w){return a.parent.sf(w)}),depth:a.remap.depth})},
fg:function(){switch(a.connectivityUp){case "direct":F=Ac.instance(a.connectivity);break;case "square":F=Bc.instance(a.connectivity);break;case "squareFast":F=Cc.instance(a.connectivity,a.activation);break;case "full":F=Dc.instance(Object.assign({Ua:a.Ua},a.connectivity));break;case "conv":h=a.kernelsCount,F=Ec.instance(a.connectivity),p&&(l.wc=ba.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},Z:function(w,C){n=w;F.La?(l.input.C(),v&&l.bias.g(2),F.Z(x),l.input.g(0),l.input.df(N),l.wb.C(),
v?u.set("s0"):(u.set(G),u.F("u4",D),l.bias.g(1)),l.input.Ee(N,0),Q.l(!1,!1),u.set(L),l.output.v(),l.wb.g(0),Q.l(!1,!1)):(l.output.C(),l.bias.g(1),F.Z());if(m)return C=l.output,k&&(l.uc.C(),C.g(0),u.set(O),u.I("u6",a.size,a.size),Q.l(!1,!1),C=l.uc),p&&(l.wc.v(),u.set("s24"),u.I("u19",h,H/h),C.g(0),Q.l(!1,!1),C=l.wc),C.g(0),C;var M=l.output;if(a.normalize||q.xb)w=a.normalize,u.set(q.xb?"s9":"s8"),u.F("u11",w?t:1),l.vc.C(),M.g(0),Q.l(!1,!1),M=l.vc;w=null;switch(q.type){case "cpuRGBA2Float":M.cd(!1);
C?w=f.Uf(M).then(q.L):(M=f.Vf(M),q.L(M));break;case "cpuMeanFloat":M.cd(!0);if(C)w=M.Xf().then(q.L);else{M=M.Yf();for(var y=0;y<M.length;++y);q.L(M)}break;case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==q.L&&q.L(M)}C&&null===w&&(w=Promise.resolve());return w},Lb:function(w){a.X=w;c();d()},mg:function(w){w&&(q.type=w.Cb||"none",q.L=w.Bb||null,q.isLinear=w.tc?!0:!1);d();w="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var C=0,M=0,y=0;C<w;++C)q.buffer.push(M+
(a.size-1-y)*a.size),q.results.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++y);q.xb="gpuRawAvg"===q.type||"cpuMeanFloat"===q.type;if(a.normalize||q.xb)l.vc=ba.instance({isFloat:!0,isPot:!0,width:a.size})},Uf:function(w){return w.Wf().then(g)},Vf:function(w){w=w.Vd();g(w);return q.results},u:function(){for(var w in l){var C=l[w];C&&C.remove()}F&&(F.u(),F=null)}};a.Db&&f.fg(a.Db);return f}}}(),Ac=function(){return{instance:function(a){var c=ba.instance(a.weights);return{La:!0,sb:function(){return 1},
u:function(){c.remove()},xf:function(){return c},Z:function(){u.set("s30");c.g(1);Q.l(!1,!1)}}}}}(),Dc=function(){return{instance:function(a){var c=a.fromLayerSize,d=ba.instance(a.weights),g=a.Ua?"s27":"s26";return{La:!0,sb:function(){return c},u:function(){d.remove()},Z:function(l){if(l.isEnabled){u.set("s28");l.Nf.g(3);for(var n=Math.min(l.Za.length,l.depth),m=0;m<n;++m)l.Za[m].De(4+m)}else u.set(g);u.F("u9",a.toLayerSize);u.F("u10",a.fromLayerSize);d.g(1);Q.l(!1,!1)}}}}}(),Bc=function(){return{instance:function(a){for(var c=
a.fromLayerSize,d=a.toLayerSize,g=a.toSparsity,l=g*d,n=l/c,m=c/d,q=0,h=0,p=0,v=Array(g*d*g*d*4),G=Array(g*d*g*d*4),x=Array(c*c),t=0;t<x.length;++t)x[t]=0;t=Math.floor(g/2);for(var L=.5/d,D=.5/c,k=.5/l,H=0;H<d;++H)for(var O=Math.round(H*m),N=0;N<d;++N){var F=Math.round(N*m),f=H/d,w=N/d;f+=L;w+=L;for(var C=0;C<g;++C){var M=O+C-t;0>M&&(M+=c);M>=c&&(M-=c);for(var y=0;y<g;++y){var S=q/l,ca=h/l,R=F+y-t;0>R&&(R+=c);R>=c&&(R-=c);var r=M/c,e=R/c;ca=1-ca-1/l;r+=D;e+=D;S+=k;ca+=k;var A=H*g+C,T=N*g+y;T=d*g-T-
1;A=T*d*g+A;v[4*A]=S;v[4*A+1]=ca;v[4*A+2]=r;v[4*A+3]=e;e=x[R*c+M]++;A=e%n;r=M*n+A;R=R*n+(e-A)/n;R=c*n-1-R;R=R*c*n+r;G[4*R]=S;G[4*R+1]=ca;G[4*R+2]=f;G[4*R+3]=w;++q>=l&&(q=0,++h);++p}}}x=null;var U=ba.instance(a.weights);delete a.weights.data;var ea=ba.instance({width:l,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;var Ka=ba.instance({width:l,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{La:!0,sb:function(){return n},u:function(){ea.remove();Ka.remove();U.remove()},Z:function(){u.set("s25");
U.g(1);Ka.g(2);Q.l(!1,!1)}}}}}(),Ec=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,g=d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],n=ba.instance(a.weights);return{La:!0,sb:function(){return g},Ah:function(){return d},xf:function(){return n},u:function(){n.remove()},Z:function(){u.set("s29");u.fa("u29",l);u.F("u27",c);u.F("u28",d);u.F("u9",a.toLayerSize);u.F("u10",a.fromLayerSize);n.g(1);Q.l(!1,!1)}}}}}(),Cc=function(){return{instance:function(a,c){var d=a.fromLayerSize,
g=a.toLayerSize,l=a.toSparsity,n=a.stride?a.stride:1,m=l*g/d,q=g<d,h=d/g,p=ba.instance(a.weights),v="s51"+[d.toString(),g.toString(),l.toString(),n.toString(),c].join("_");u.af(v)||(a=uc.ef(c,"gl_FragColor","gl_FragColor"),g=[{type:"1f",name:"u9",value:g},{type:"1f",name:"u33",value:n}],q&&g.push({type:"1f",name:"u10",value:d}),d=[(q?m:l).toFixed(1),a],q&&d.push(h.toFixed(1)),u.Af(q?"s47":"s46",v,d),u.K(v,g.concat([{type:"1i",name:"u7",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u8",value:3}])));
return{La:!1,sb:function(){return m},u:function(){p.remove()},Z:function(){u.set(v);p.g(3);Q.l(!1,!1)}}}}}(),wc=function(){return{instance:function(a){var c=a.Ld?a.Ld:3,d=a.xd?a.xd:64,g=a.Od?a.Od:64,l=a.ba?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var n=ba.instance(a),m=ba.instance(a),q=ba.instance(a),h=ba.instance(a),p=ba.instance({isFloat:!0,width:g,isPot:!1,isFlipY:!1}),v=1/d;return{process:function(G){u.set("s43");h.v();Q.l(l,!1);u.set("s44");for(var x=0;x<c;++x)n.v(),u.I("u15",v,0),Q.l(l,
!1),q.v(),h.g(0),Q.l(l,!1),m.v(),n.g(0),u.I("u15",0,v),Q.l(l,!1),h.v(),q.g(0),Q.l(l,!1),x!==c-1&&m.g(0);u.set("s45");p.v();G.g(0);m.g(1);h.g(2);Q.l(l,!1);p.g(0)},Ta:function(){return p}}}}}(),xc=function(){return{instance:function(a){function c(h,p){return ba.instance({isFloat:h,width:d.$,isPot:!1,isFlipY:!1,isLinear:p})}var d=Object.assign({qa:.1,ia:9,$:128,gain:1,ba:!1,isLinear:!0},a),g=c(!1,!1),l=[c(!1,d.isLinear),c(!1,d.isLinear),c(!1,d.isLinear)],n=[c(!1,d.isLinear),c(!1,d.isLinear),c(!1,d.isLinear)],
m=c(!0,d.isLinear),q=[g,n[0],n[1]];a={u1:0};u.bb([{id:"s53",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(b);}",j:a,i:["u1"],precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ia-1)/2).toFixed(2)).replace("2.2222",(1/d.$).toFixed(6)),j:a,i:["u1","u34"],precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u35,u36,u37,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u35,vv0).rgb;float c=texture2D(u36,vv0).r,d=texture2D(u37,vv0).r,i=texture2D(u38,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.qa.toFixed(4)).replace("2.2222",
d.gain.toFixed(4)),j:{u35:0,u36:1,u37:2,u38:3},i:["u35","u36","u37","u38"],precision:"highp"}]);return{process:function(){u.set("s53");g.C();Q.l(d.ba,!1);u.set("s54");for(var h=0;3>h;++h)u.I("u34",1,0),l[h].v(),q[h].g(0),Q.l(!1,!1),u.I("u34",0,1),n[h].v(),l[h].g(0),Q.l(!1,!1);u.set("s55");m.v();g.g(0);n[0].g(1);n[1].g(2);n[2].g(3);Q.l(!1,!1);m.g(0)},Ta:function(){return m}}}}}(),yc=function(){return{instance:function(a){function c(q){return ba.instance({isFloat:q,width:d.$,isPot:!1,isFlipY:!1})}var d=
Object.assign({qa:.1,ia:9,$:128,gain:1,ba:!1},a),g=c(!1),l=c(!1),n=c(!1),m=c(!0);a={u1:0};u.bb([{id:"s56",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",j:a,i:["u1"],precision:"lowp"},{id:"s57",name:"_",h:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ia-1)/2).toFixed(2)).replace("2.2222",(1/d.$).toFixed(6)),j:a,i:["u1","u34"],precision:"lowp"},{id:"s58",name:"_",h:"uniform sampler2D u0,u39;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u39,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.qa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),j:{u0:0,u39:1},i:["u0",
"u39"],precision:"highp"}]);return{process:function(){u.set("s56");g.C();Q.l(d.ba,!1);u.set("s57");u.I("u34",1,0);l.v();g.g(0);Q.l(!1,!1);u.I("u34",0,1);n.v();l.g(0);Q.l(!1,!1);u.set("s58");m.v();g.g(0);n.g(1);Q.l(!1,!1);m.g(0)},Ta:function(){return m}}}}}(),zc=function(){return{instance:function(a){function c(h){return ba.instance({isFloat:h,width:d.$,isPot:!1,isFlipY:!1})}var d=Object.assign({qa:.1,ia:9,$:128,gain:1,xc:0,Va:!1,ba:!1},a),g=c(!1),l=null,n=null,m=null;d.Va&&(l=c(!1),n=c(!1),m=c(!0));
a={u1:0};var q=[{id:"s59",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",d.xc.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];d.Va&&q.push({id:"s60",name:"_",h:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u34;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u34*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",
Math.round((d.ia-1)/2).toFixed(2)).replace("2.2222",(1/d.$).toFixed(6)),j:a,i:["u1","u34"],precision:"lowp"},{id:"s61",name:"_",h:"uniform sampler2D u0,u39;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u39,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",d.qa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),j:{u0:0,u39:1},i:["u0","u39"],precision:"highp"});u.bb(q);return{process:function(){u.set("s59");
g.C();Q.l(d.ba,!1);d.Va?(u.set("s60"),u.I("u34",1,0),l.v(),g.g(0),Q.l(!1,!1),u.I("u34",0,1),n.v(),l.g(0),Q.l(!1,!1),u.set("s61"),m.v(),g.g(0),n.g(1),Q.l(!1,!1),m.g(0)):g.g(0)},pf:function(){return 2-d.xc},Ta:function(){return d.Va?m:g}}}}}(),Ua=function(){function a(k,H,O,N,F,f,w){if(!L)if(w===f.length)F();else{switch(f[w]){case "A":O();break;case "D":k();break;case "S":H().then(function(C,M){D.ge();a(k,H,O,M?null:N,F,f,++w)}).catch(function(C){console.log("An error occurred in the WebAR loop: ",
C);F()});return;case "R":N&&N()}a(k,H,O,N,F,f,++w)}}var c={n:5,qc:1,lc:0,cf:[25,39],bd:45,kb:[2,200],k:.7,tg:200,Pf:.05},d=-1,g=null,l=-1,n=-1,m=0,q=-1,h=-1,p=0,v=null,G=0,x=c.kb[1],t=Math.log(2),L=!0,D={tf:function(){switch(d){case -1:return-1;case 0:return h+g.lc;case 1:return p}},jh:function(k){switch(d){case -1:return 1;case 0:return Math.pow(Math.min(Math.max(q,0),g.n-1)/(g.n-1),k||1);case 1:return(p-g.lc)/(g.n-1)}},B:function(k){g=Object.assign({},c,k);q=h=g.qc;d=0;v=g.cf.slice(0);D.reset();
D.$e().then(function(H){H>=g.bd||(H/=g.bd,v[0]*=H,v[1]*=H)})},ge:function(k){k=("undefined"===typeof k?Date.now():k)||0;var H=Math.min(Math.max(k-G,g.kb[0]),g.kb[1]);x=H;G=k;var O=-1===l?0:g.k;l=Math.min(Math.max(1E3/H,5),120)*(1-O)+l*O;k-n>g.tg&&5<++m&&(H=g.k,q=q*(1-H)+(l<v[0]?h-1:l>v[1]?h+1:h)*H,Math.abs(q-h)>1-g.Pf&&(H=Math.min(Math.max(Math.round(q),0),g.n-1),H!==h&&(q=h=H,l=.5*(v[1]-v[0]))),n=k)},Xd:function(k,H,O,N,F,f){L=!1;a(k,H,O,N,F,f,0)},stop:function(){L=!0},$d:function(k){p=k;d=1},sg:function(){d=
0;D.reset()},reset:function(){x=c.kb[1];n=l=-1;m=0},pi:function(k,H,O){O=Math.exp(-t*x/O);return(1-O)*k+O*H},hf:function(){return x},$e:function(){return new Promise(function(k){function H(w){w=w||Date.now();var C=Math.max(0,w-N);N=w;0!==F++&&0<C&&(O=Math.min(O,C),++f);10>=F?window.requestAnimationFrame(H):k(Math.round(1E3/O))}var O=Infinity,N=0,F=0,f=0;setTimeout(H,1)})}};return D}(),gb=function(){function a(){d(D+t.oc);k.port.postMessage("DONE")}function c(){F.eb=0===t.Ba?O(d):O(g)}function d(y){N.Ha&&
null!==L&&(y-=D,y=Math.min(Math.max(y,t.dd[0]),t.dd[1]),D+=y,n(),f.isEnabled&&f.Wa&&N.da&&D-f.jc>t.Oc&&(p(),f.jc=D),L(D))}function g(y){N.Ha&&(F.timeout=setTimeout(d.bind(null,y),t.Ba))}function l(){L=null;N.Ha=!1;n()}function n(){F.eb&&(window.cancelAnimationFrame(F.eb),F.eb=null);F.timeout&&(window.clearTimeout(F.timeout),F.timeout=null)}function m(y){y&&!N.da?(N.da=!0,H&&Ua.sg(),k.port.postMessage("STOP"),ja.he(!0),c()):!y&&N.da&&(N.da=!1,H&&Ua.$d(1),ja.he(!1),k.port.postMessage("START"))}function q(y){y.target.hidden?
C():w()}function h(y,S,ca){S=y.createShader(S);y.shaderSource(S,ca);y.compileShader(S);return S}function p(){f.Wa=!1;var y=f.ma,S=f.ub,ca=f.vb,R=f.aa;y.uniform1f(f.vd,Math.random());f.Ia?S.beginQueryEXT(R,ca):y.beginQuery(R,ca);y.drawElements(y.POINTS,1,y.UNSIGNED_SHORT,0);f.Ia?S.endQueryEXT(R):y.endQuery(R);ja.flush();G().then(function(r){0===r||isNaN(r)?(f.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",r)):(r=t.ve*t.Nc*1E3/
r,f.Mb=(f.Mb+1)%t.Ma,f.kc[f.Mb]=r,++f.Hd>t.Ma&&(f.zb.set(f.kc),f.zb.sort(function(e,A){return e-A}),r=f.zb[Math.floor(t.Ma/2)],f.pb=Math.max(f.pb,r),t.Mc(r/f.pb)),f.Wa=!0)}).catch(function(){f.Wa=!0})}function v(y){var S=f.ma,ca=f.ub,R=f.vb;R=f.Ia?ca.gh(R,ca.QUERY_RESULT_AVAILABLE_EXT):S.getQueryParameter(R,S.QUERY_RESULT_AVAILABLE);S=S.getParameter(ca.GPU_DISJOINT_EXT);R?y(!S):setTimeout(v.bind(null,y),.1)}function G(){return new Promise(function(y,S){v(function(ca){if(ca){ca=f.ma;var R=f.ub,r=f.vb;
ca=f.Ia?R.getQueryObjectEXT(r,R.QUERY_RESULT_EXT):ca.getQueryParameter(r,ca.QUERY_RESULT);y(ca)}else S()})})}var x={Dd:!0,dd:[1,200],oc:20,Ba:0,Nc:50,ve:240,Oc:3E3,Ma:3,Mc:null},t=null,L=null,D=0,k=null,H=!1,O=null,N={wa:!1,da:!0,ic:!1,hc:!1,fc:!1,Ha:!1},F={eb:null,timeout:null},f={isEnabled:!1,Wa:!1,ma:null,ub:null,vb:null,aa:null,vd:null,Ia:!0,jc:0,Hd:0,kc:null,zb:null,Mb:0,pb:0},w=m.bind(null,!0),C=m.bind(null,!1),M={B:function(y){t=Object.assign(x,y);Object.assign(N,{da:!0,wa:!0,Ha:!1});O=window.requestPostAnimationFrame||
window.requestAnimationFrame;if(null!==t.Mc){y=document.createElement("canvas");y.setAttribute("width","1");y.setAttribute("height","1");var S={antialias:!1};y=y.getContext("webgl2",S)||y.getContext("webgl",S);if(S=y.getExtension("EXT_disjoint_timer_query")||y.getExtension("EXT_disjoint_timer_query_webgl2")){f.ma=y;f.ub=S;f.isEnabled=!0;f.Ia=S.beginQueryEXT?!0:!1;var ca=h(y,y.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),R=h(y,y.FRAGMENT_SHADER,"precision lowp float;uniform float u40;void main(){vec4 a=u40*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
t.Nc.toString())),r=y.createProgram();y.attachShader(r,ca);y.attachShader(r,R);y.linkProgram(r);ca=y.getAttribLocation(r,"a0");f.vd=y.getUniformLocation(r,"u40");y.useProgram(r);y.enableVertexAttribArray(ca);r=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,r);y.bufferData(y.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),y.STATIC_DRAW);y.vertexAttribPointer(ca,4,y.FLOAT,!1,16,0);r=y.createBuffer();y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,r);y.bufferData(y.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),y.STATIC_DRAW);
y.disable(y.DEPTH_TEST);y.disable(y.DITHER);y.disable(y.STENCIL_TEST);y.viewport(0,0,1,1);r=f.Ia?S.createQueryEXT():y.createQuery();f.vb=r;f.aa=S.TIME_ELAPSED_EXT||y.TIME_ELAPSED;f.jc=-t.Oc;f.kc=new Float32Array(t.Ma);f.zb=new Float32Array(t.Ma);f.pb=0;f.Mb=0;f.Hd=0;f.Wa=!0}}if(t.Dd){y=!1;try{if("undefined"===typeof SharedWorker){var e=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
t.oc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),A=new Worker(e);A.addEventListener("message",a);k={Qd:A,port:A};N.ic=!0}else{var T=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
t.oc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),U=new SharedWorker(T);U.port.start();U.port.addEventListener("message",a);k={Qd:U,port:U.port};N.hc=!0}y=!0}catch(ea){}y&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",q):(window.addEventListener("blur",C),window.addEventListener("focus",w)),window.addEventListener("pagehide",
C),window.addEventListener("pageshow",w),N.fc=!0)}H="undefined"!==typeof Ua},u:function(){l();N.fc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",q):(window.removeEventListener("blur",C),window.removeEventListener("focus",w)),window.removeEventListener("pagehide",C),window.removeEventListener("pageshow",w),N.fc=!1);N.hc?(k.port.close(),N.hc=!1):N.ic&&(k.Qd.terminate(),N.ic=!1);Object.assign(N,{da:!0,wa:!1,Ha:!1});L=null},Ph:function(){return N.da},update:function(y){Object.assign(t,
y)},Xd:function(y){N.wa||M.B({});n();N.Ha=!0;L=y;N.da&&c()},stop:l};return M}(),ia={td:function(){return ia.Xc()?document.createElement("video"):!1},Sa:function(a,c){a[c]=!0;a.setAttribute(c,"true")},Le:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Ke:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Lf:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Gg:function(){return ia.Vc()||ia.Ke()},ng:function(a,c){window.addEventListener("beforeunload",function(){c&&c.getTracks&&c.getTracks().forEach(function(d){c.removeTrack(d)});a.videoStream&&a.videoStream.stop();a.videoStream=null},!1)},Vc:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},eh:function(){return ia.Le()?ia.Lf()?window.innerHeight/window.innerWidth*45:45:45},Xc:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Zh:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Wc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(g){return g&&"object"===typeof g?Object.assign({},g):g};c=
{};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&ia.Rc(c,a.deviceId);return c},Rc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},fe:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},
Qe:function(a){function c(x){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(t,L){return Math.abs(t-x)-Math.abs(L-x)})}function d(x){var t=ia.Wc(a);x=x(t);l.push(x);g(x)}function g(x){if(x.video&&x.video.facingMode&&x.video.facingMode.exact){var t=x.video.facingMode.exact;x=ia.Wc(x);delete x.video.facingMode.exact;x.video.facingMode.ideal=t;l.push(x)}}var l=[];if(!a||!a.video)return l;g(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var n=
c(a.video.width.ideal).slice(0,3),m=c(a.video.height.ideal).slice(0,3),q={},h=0;for(q.Aa=void 0;h<n.length;q={Aa:q.Aa},++h){q.Aa=n[h];var p={},v=0;for(p.va=void 0;v<m.length;p={va:p.va},++v)if(p.va=m[v],q.Aa!==a.video.width.ideal||p.va!==a.video.height.ideal){var G=Math.max(q.Aa,p.va)/Math.min(q.Aa,p.va);G<4/3-.1||G>16/9+.1||d(function(x,t){return function(L){L.video.width.ideal=x.Aa;L.video.height.ideal=t.va;return L}}(q,p))}}}d(function(x){return ia.fe(x)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(x){delete x.video.width.ideal;delete x.video.height.ideal;return x}),d(function(x){delete x.video.width;delete x.video.height;return x}));a.video.facingMode&&(d(function(x){delete x.video.facingMode;return x}),a.video.width&&a.video.height&&d(function(x){ia.fe(x);delete x.video.facingMode;return x}));l.push({audio:a.audio,video:!0});return l},Kd:function(a){a.volume=0;ia.Sa(a,"muted");if(ia.Vc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",
c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;ia.Sa(a,"muted")},5)}},ri:function(a,c,d){return null===a?Promise.resolve():new Promise(function(g,l){if(a.srcObject&&a.srcObject.getVideoTracks){var n=a.srcObject.getVideoTracks();1!==n.length?l("INVALID_TRACKNUMBER"):(n=n[0],c?ia.get(a,g,l,d):(n.stop(),g()))}else l("BAD_IMPLEMENTATION")})},sd:function(a,c,d,g){function l(m){n||
(n=!0,d(m))}var n=!1;return navigator.mediaDevices.getUserMedia(g).then(function(m){function q(){setTimeout(function(){if(a.currentTime){var p=a.videoHeight;if(0===a.videoWidth||0===p)l("VIDEO_NULLSIZE");else{p={Je:null,lg:null,Of:null};try{var v=m.getVideoTracks()[0];v&&(p.Of=v,p.Je=v.getCapabilities(),p.lg=v.getSettings())}catch(G){}n||(ia.ng(a,m),c(a,m,p))}}else l("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var p=a.play();ia.Kd(a);"undefined"===typeof p?q():
p.then(function(){q()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=m:(a.src=window.URL.createObjectURL(m),a.videoStream=m);ia.Kd(a);a.addEventListener("loadeddata",h,!1)}).catch(function(m){l(m)})},vf:function(a,c){var d=c||ia.td();return new Promise(function(g,l){ia.get(d,g,l,a)})},get:function(a,c,d,g){if(!a)return d&&d("VIDEO_NOT_PROVIDED"),!1;if(!ia.Xc())return d&&d("MEDIASTREAMAPI_NOT_FOUND"),!1;ia.Sa(a,"autoplay");ia.Sa(a,"playsinline");g&&
g.audio?a.volume=0:ia.Sa(a,"muted");ia.Ne(g).then(function(){ia.sd(a,c,function(){function l(m){if(0===m.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var q=m.shift();ia.sd(a,c,function(){l(m)},q)}}var n=ia.Qe(g);l(n)},g)})},Ne:function(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var d={user:[],
environment:["camera2 0"]}[c];return d&&0!==d.length?new Promise(function(g){ia.wf(function(l){l?(l=l.find(function(n){var m=n.label;return m?d.some(function(q){return m.includes(q)}):!1}))?(a.video.deviceId={exact:l.deviceId},g("SUCCESS")):g("NO_PREFERRED_DEVICE_FOUND"):g("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},wf:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=
c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Fg:function(a,c,d){var g={};g[c]=d;c=[];c.push(g);a.applyConstraints({advanced:c}).catch(function(){})}},Ob=function(){var a={Ff:!0,isLinear:!0,pc:[4,11]};return{Ze:function(c,d,g){return d.isDetected?Math.floor(d.s*c):(c=Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(g,Math.pow(2,
c)))},instance:function(c){var d=Object.assign({},a,c),g=[],l=null,n=-1,m=null,q=!1;for(c=d.pc[0];c<=d.pc[1];++c)g[c]=null;return{C:function(h,p){p!==n&&(l&&l.remove(),l=ba.instance({isLinear:d.isLinear,isPot:!0,width:p}));if(q=d.Ff&&p<.5*h){h=Math.floor(Math.log2(h));var v=d.pc;h=Math.min(Math.max(h,v[0]),v[1]);v=h;if(!g[v]){var G=ba.instance({isPot:!0,isMipmap:!0,Ed:!0,width:Math.pow(2,v)});g[v]={N:G,Jd:-1}}h=g[h];m=h.N;h.Jd!==p&&(v=Math.log2(p),m.g(0),m.be(v),Ma.R(0),h.Jd=p)}else m=l;n=p;m.C()},
g:function(h){m.g(h);q&&m.rb()},Da:function(h){m.Da(h)},remove:function(){l&&l.remove();g.forEach(function(h){h&&h.N.remove()})}}}}}(),Fc=function(){function a(m){Ca.R();u.set("s1");b.viewport(0,0,1,1);Q.l(!1,!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,m);Ca.V()}var c=!1,d=!1,g=null,l=null,n={B:function(){var m={u1:0};u.ha({id:"s62",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u31;const vec3 f=vec3(.3333,.3333,.3333);const vec4 h=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y-u31.y))*1.,a-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y+u31.y))*1.,a+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y-u31.y))*1.,a+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y+u31.y))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y-u31.y))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u31.y))*2.,b-=texture2D(u1,vec2(vv0.x+u31.x,vv0.y-u31.y))*1.,b+=texture2D(u1,vec2(vv0.x-u31.x,vv0.y+u31.y))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u31.y))*2.,b+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y+u31.y))*1.;vec3 e=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 c=texture2D(u1,vv0),g=vec4(e,c.a);gl_FragColor=vec4(dot(g.rgb,f),dot(c.rgb,f),0.,1.);}",
i:["u1","u31"],j:m});u.ha({id:"s63",name:"_",h:"uniform sampler2D u1;uniform vec2 u41;uniform float u42,u43,u44,u45;varying vec2 vv0;void main(){vec2 a=floor(vv0*u43);float d=a.x+a.y*u43,f=u43*u43;vec2 g=fract(vv0*u43),b=u44+g*(1.-2.*u44);float c=d/(f-1.),h=mix(u41.x,u41.y,c);vec2 i=b+h*vec2(1.,1./u45)*vec2(cos(u42),sin(u42));float j=texture2D(u1,i).r;gl_FragColor=vec4(j,b,c);}",i:"u1 u41 u42 u43 u44 u45".split(" "),j:m});u.ha({id:"s64",name:"_",h:"uniform sampler2D u1;uniform vec2 u15,u46;varying vec2 vv0;void main(){vec4 a=vec4(0.,0.,0.,0.),b;float e;vec2 g=vv0-u15*2.;for(float c=0.;c<3.9;c+=1.)for(float d=0.;d<3.9;d+=1.)b=texture2D(u1,g+u15*vec2(c,d)),e=step(a.r,b.r),a=mix(a,b,e);gl_FragColor=a;}",
i:["u1","u15","u46"],j:m});u.ha({id:"s65",name:"_",h:"uniform sampler2D u1;uniform vec2 u47;uniform float u48;const vec4 f=vec4(0.,1.,0.,1.);varying vec2 vv0;void main(){float a=step(abs(distance(vv0,u47)-u48),1e-3);gl_FragColor=mix(texture2D(u1,vv0),f,a);}",i:["u1","u47","u48"],j:m});c=!0},ni:function(m){c||n.B();u.set("s62");u.I("u31",.5/m.A(),.5/m.W());m.g(0);Q.l(!1,!1)},We:function(m){u.set("s65");u.fa("u47",m.m);u.F("u48",m.H);Q.l(!1,!1)},instance:function(m){c||n.B();var q="undefined"===typeof m.Tf?
8:m.Tf,h=m.width,p=m.yc,v=[Math.floor(p[0]*h),Math.ceil(p[1]*h)],G=h-2*v[1],x=m.Md?m.Md:8,t=Math.ceil(("undefined"===typeof m.Td?1:m.Td)*h);G=Math.min(G,2*t);var L=Math.max(v[1],h/2-t)/h,D="undefined"===typeof m.ya?1:m.ya,k=ba.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:G*q}),H=1/x,O=Math.ceil(Math.log(k.A())/Math.log(4));m=k.A();var N=Array(O);for(h=0;h<O;++h)N[h]=ba.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:Math.ceil(m/Math.pow(4,h+1))});var F=new Uint8Array(4),f=
{H:-1,m:[0,0],ya:D};return{gg:function(w){D=w},process:function(w){w.g(0);k.C();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);b.enable(b.BLEND);b.blendFunc(b.CONSTANT_ALPHA,b.ONE);b.blendColor(H,H,H,H);u.set("s63");u.fa("u41",p);u.F("u43",q);u.F("u44",L);u.F("u45",D);for(w=0;w<x;++w)u.F("u42",2*w*Math.PI/x),Q.l(!1,!1);b.disable(b.BLEND);u.set("s64");k.g(0);w=k.A();for(var C=0;C<O;++C){N[C].C();var M=N[C].A();u.I("u46",M,M);u.I("u15",1/w,1/w);Q.l(!1,!1);N[C].g(0);w=M}a(F);f.m[0]=F[1]/255;f.m[1]=
F[2]/255;f.H=p[0]+(p[1]-p[0])*F[3]/255;f.ya=D;return f}}},yf:function(){g=ba.instance({width:256,height:1,isFloat:!0});l=ba.instance({width:1,isFloat:!1});var m={u1:0};u.ha({id:"s66",name:"_",h:"uniform sampler2D u1;uniform vec2 u41,u47;varying vec2 vv0;void main(){float f=mix(u41.x,u41.y,vv0.x),b=0.,a=0.;vec2 c;for(float d=0.;d<51.;d+=1.)c=f*vec2(cos(a),sin(a)),b+=texture2D(u1,u47+c).r,a+=.123137;gl_FragColor=vec4(b/51.,0.,0.,1.);}",i:["u1","u41"],j:m});u.ha({id:"s67",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float b=0.,c=0.,d=0.,e;for(float a=0.;a<255.9;a+=1.)d=texture2D(u1,vec2(a/255.,.5)).r,e=step(b,d),b=mix(b,d,e),c=mix(c,a,e);gl_FragColor=vec4(c/255.,0.,0.,1.);}",
i:["u1"],j:m});d=!0},Eh:function(m){d||n.yf();var q="undefined"===typeof m.m?[0,0]:m.m,h="undefined"===typeof m.yc?[0,0]:m.yc,p=new Uint8Array(4),v={m:q,H:0};return{set:function(G,x){q[0]=G[0];q[1]=G[1];h[0]=x[0];h[1]=x[1]},process:function(G){u.set("s66");u.fa("u41",h);u.fa("u47",q);g.C();G.g(0);Q.l(!1,!1);u.set("s67");l.C();Q.l(!1,!1);l.g(0);a(p);v.H=h[0]+(h[1]-h[0])*p[0]/255;return v}}}};return n}(),E={neuralNetworkPath:"jeelizPupillometryNNC.json",Ba:0,Nb:[2,5],
we:2,minScale:.3,maxScale:1.1,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,Ic:[.05,.05,.25],pg:60,minScaleTracked:.6,maxScaleTracked:20,xe:.7,se:1,Zc:[.0015,.005],Sd:[.003,.02],Rd:[.9,.98],Ja:[.49,.42,.17],Sc:[.3,1],ze:.2,Ae:2,ad:.5,$c:.03,md:[.9,.57],ob:[.22,.22],Xe:.5,Yb:256,mb:[0,0],bf:3,pe:[.21,.24],oe:40,qe:.4,ta:128,ec:1,Bf:.005,Fb:[.07,.65],Rf:.15,Sf:.025,wg:20},Gc={idealWidth:3264,idealHeight:2448,minWidth:1920,maxWidth:7680,minHeight:1080,maxHeight:4320},Oa=null,Tb=E.Sf,
Ab=E.Bf,Sb=-1,na={Fa:!1,G:[Kb(),Kb()]},Ba={Mf:-1,error:-2,wd:0,play:1,pause:2},Ea=Ba.wd,ha={element:!1,N:!1,ab:!1,ib:[0,0],U:[.5,.5],Eb:0},oa={Qa:!1,Pb:!1,Pc:"./",ja:!1,cb:E.Ba,zd:!0},yb=null;var ib=W=P=J=pa=la=Da=Va=Aa=qa=fa=V=I=0;var ma=-1,va=-1,bb=null,ab=0,xb=null,hb=null,pb=null,ra=null,Y=null,ta=null,Nb=!1,Cb=null,qb=new Float32Array(12),lc=0,Bb=null,dc={VERSION:"2.1.0",init:function(a){function c(){Ea!==Ba.error&&2===++d&&(Wb(),ha.N=ba.instance({O:ha.element,isPot:!1,isFloat:!1,isFlipY:!0,
isLinear:!0}),Db(),oa.Qa&&(oa.Qa(!1,{GL:b,canvasElement:oa.ja,videoTexture:ha.ab.get()}),b.disable(b.BLEND)),Lb())}if(Ea!==Ba.wd)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;Ea=Ba.Mf;a.callbackReady&&(oa.Qa=a.callbackReady);a.callbackTrack&&(oa.Pb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(oa.cb=a.animateDelay);gb.B({Dd:a.isKeepRunningOnWinFocusLost||!1,Ba:oa.cb});Ua.B({qc:0,n:E.Nb[1]-E.Nb[0]+1,lc:E.Nb[0]});oa.zd="undefined"===typeof a.isAdaptative?!0:a.isAdaptative;
oa.zd||Ua.$d(E.we);"undefined"!==typeof a.NNCPath&&(oa.Pc=a.NNCPath);if(!a.canvasId)return cb("NO_CANVASID"),!1;oa.ja=document.getElementById(a.canvasId);if(!oa.ja)return cb("INVALID_CANVASID"),!1;ma=oa.ja.width;va=oa.ja.height;if(!ma||!va)return cb("INVALID_CANVASDIMENSIONS"),!1;var d=0;Oa=Object.assign({},Gc,a.videoSettings||{});Oa.videoElement?Xb(Oa.videoElement,c):sc(a.onWebcamAsk,a.onWebcamGet,function(g){Xb(g,c)});pc(function(g){if(!qc())return!1;yb=new K({Za:g.layers,Cb:"gpuRawAvg",Bb:rc});
u.bb([{id:"s76",name:"_",ra:"attribute vec2 a0;uniform vec2 u55;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u55*a0;}",Ca:["a0"],sa:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u55"],precision:"lowp"},{id:"s77",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ra:"attribute vec2 a0;uniform sampler2D u57;uniform vec2 u58;varying vec2 vv0;void main(){vec4 a=texture2D(u57,vec2(.17,.5));vec2 b=a.gb,c=a.a*u58;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",
Ca:["a0"],sa:[2],i:["u1","u57","u58"],precision:"lowp"},{id:"s78",name:"_",h:"uniform sampler2D u59,u57;uniform vec3 u60,u61;uniform float u62,u63,u64,u65,u66;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u59,vec2(.5,.5)),d=texture2D(u59,vec2(.75,.5));float f=dot(e,texture2D(u59,vec2(.75,.75))),g=dot(e,texture2D(u59,vec2(0.,.5))),h=dot(e,texture2D(u59,vec2(.25,.5)));vec4 a=texture2D(u57,vec2(.25,.5));float b=dot(c,e),i=dot(d,e);bool j=b>u65&&b>i+u66;j?a.r=2.:a.r>u64?a.r=0.:a.r>1.9&&(a.a>u63||a.a<u62)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u60);else a.r*=step(1.9,a.r),a.gba+=vec3(f,g,h)*u61*a.a;gl_FragColor=a;}",
ra:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u59 u57 u60 u62 u63 u64 u61 u65 u66".split(" ")},{id:"s79",name:"_",ra:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u59;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u59,vec2(0.,.75))),b=dot(e,texture2D(u59,vec2(.25,.75))),c=dot(e,texture2D(u59,vec2(.5,.75))),d=dot(e,texture2D(u59,vec2(.5,.5)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u59"]},{id:"s68",name:"_",h:"uniform sampler2D u57;uniform float u67;varying vec2 vv0;void main(){float f=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u57,vec2(vv0.x,.5));a.a=mix(a.a*u67,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u57","u67"]},{id:"s69",name:"_",h:"uniform sampler2D u57,u68;uniform vec2 u58;varying vec2 vv0;void main(){vec2 a=vec2(1.-vv0.x,vv0.y);vec4 d=texture2D(u57,vec2(.25,.5));vec2 b=d.gb;float h=d.a;vec2 c=h*u58,i=b+c/2.,j=b-c/2.,f=step(j,a)*step(a,i);vec3 k=texture2D(u68,a).rgb;vec2 g=2.*abs(b-a)/c;float l=f.x*f.y*pow(max(g.x,g.y),3.);vec3 m=mix(k,vec3(0.,.6,1.),l);gl_FragColor=vec4(m,1.);}",
i:["u57","u68","u58"]},{id:"s70",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u31;uniform float u49;const vec3 f=vec3(.3333,.3333,.3333);void main(){vec3 a=vec3(0.);a-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y-u31.y)).rgb*1.,a-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y)).rgb*2.,a-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y+u31.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y-u31.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y)).rgb*2.,a+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y+u31.y)).rgb*1.;vec3 b=vec3(0.);b-=texture2D(u1,vec2(vv0.x-u31.x,vv0.y-u31.y)).rgb*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u31.y)).rgb*2.,b-=texture2D(u1,vec2(vv0.x+u31.x,vv0.y-u31.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x-u31.x,vv0.y+u31.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u31.y)).rgb*2.,b+=texture2D(u1,vec2(vv0.x+u31.x,vv0.y+u31.y)).rgb*1.;vec3 e=a*a+b*b,g=texture2D(u1,vv0).rgb;float c=dot(e,f),h=dot(g,f);c=smoothstep(u49-.1,u49+.1,c),gl_FragColor=vec4(c,h,0.,1.);}",
ra:"attribute vec2 a0;uniform vec2 u11,u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u47+u11*a0,vv0=.5*vv0+vec2(.5,.5);}",Ca:["a0"],sa:[2],i:["u1","u11","u47","u31","u49"]},{id:"s71",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ra:"attribute vec2 a0;uniform vec2 u11,u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u47+u11*a0,vv0=.5*vv0+vec2(.5,.5);}",Ca:["a0"],sa:[2],i:["u1","u11","u47"]},{id:"s72",name:"_",h:"uniform sampler2D u1;uniform vec2 u51,u41;uniform float u50;varying vec2 vv0;const float n=3.141592;const int o=4;int j(vec2 a,vec3 d){vec3 b=texture2D(u1,a).rgb;float c=length(b);return int(step(c,u50));}void main(){vec2 c=u51.x*vec2(1.,1.)+vv0*u51.y;vec3 k=texture2D(u1,c).rgb;float d=0.,e,f;int a;vec2 l,g,b;for(float h=0.;h<60.;h+=1.){e=0.,a=o,f=h*n/60.,l=vec2(cos(f),sin(f));for(float i=0.;i<255.;i+=1.){g=(u41.x/2.+i/255.*(u41.y-u41.x)/2.)*l;if(a>0)b=c+g,a-=1-j(b,k),b=c-g,a-=1-j(b,k),e+=1.;}d=max(e,d);}gl_FragColor=vec4(d/255.,0,0,1.);}",
i:["u1","u51","u41","u50"]},{id:"s73",name:"_",h:"uniform sampler2D u1;uniform vec2 u47;uniform float u52,u53;const vec3 f=vec3(0.,1.,0.);varying vec2 vv0;void main(){vec2 b=vec2(1.,u53);float d=distance(vv0*b,u47*b),g=step(abs(d-u52),1e-3);vec3 c=texture2D(u1,vv0).rgb,a=c.g*vec3(1.,1.,1.);a.r+=c.r,a=mix(a,f,g),gl_FragColor=vec4(a,1.);}",i:["u1","u47","u52","u53"]},{id:"s74",name:"_",h:"uniform sampler2D u1;uniform vec2 u47;uniform float u54;const vec3 f=vec3(0.,1.,0.),g=vec3(0.,1.,0.);varying vec2 vv0;void main(){float b=step(abs(distance(vv0,u47)-u54),2e-3),c=step(distance(vv0,u47),4e-3);vec3 d=texture2D(u1,vv0).rgb,a=d;a=mix(a,f,b),a=mix(a,g,c),gl_FragColor=vec4(a,1.);}",
i:["u1","u47","u54"]},{id:"s75",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float a=texture2D(u1,vv0).r;gl_FragColor=vec4(a,0.,0.,1.);}",i:["u1"]}]);nc();Bb=Fc.instance({width:E.Yb,yc:E.pe,Md:E.oe,Td:E.qe});Vb();Ub();c();dc.update_controls()});return!0},toggle_pause:function(a){if(-1!==[Ba.play,Ba.pause].indexOf(Ea))return a?Ea!==Ba.play?a=!1:(gb.stop(),Ea=Ba.pause,a=!0):a=Lb(),a},set_animateDelay:function(a){oa.cb=a;gb.update({Ba:oa.cb})},resize:function(){var a=oa.ja.width,c=oa.ja.height;
if(a===ma&&c===va)return!1;ma=a;va=c;Vb();Ub();Wb();Db();return!0},update_controls:function(){function a(d){return(d=document.getElementById(d))?parseFloat(d.value):!1}var c=a("jeePupilControlIrisEdgeSize");!1!==c&&(Ab=c,Db());c=a("jeePupilControlIrisThres");!1!==c&&(Sb=c);c=a("jeePupilControlIrisRoundness");!1!==c&&Bb.gg(c);c=a("jeePupilControlPupilSensitivity");!1!==c&&(Tb=c)}};return dc}();
;return JEELIZPUPILLOMETRY||window.JEELIZPUPILLOMETRY;})();